\hypertarget{math_8c}{}\section{Kernel/\+Sources/user/src/math.c File Reference}
\label{math_8c}\index{Kernel/\+Sources/user/src/math.\+c@{Kernel/\+Sources/user/src/math.\+c}}
\subsection*{Data Structures}
\begin{DoxyCompactItemize}
\item 
union \hyperlink{uniondwords}{dwords}
\item 
union \hyperlink{unionudwords}{udwords}
\end{DoxyCompactItemize}
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \hyperlink{math_8c_a308d9dd2c0028ddb184b455bbd7865de}{C\+H\+A\+R\+\_\+\+B\+IT}~8
\end{DoxyCompactItemize}
\subsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
typedef int \hyperlink{math_8c_a631e292730161ad5381eafff0013891e}{si\+\_\+int}
\item 
typedef unsigned \hyperlink{math_8c_ac80f361c8037aadb06208683492f5753}{su\+\_\+int}
\item 
typedef long long \hyperlink{math_8c_ac61d8e40091c07135fee5e0f6a7ca723}{di\+\_\+int}
\item 
typedef unsigned long long \hyperlink{math_8c_a86c9c257fc96e5d8128ef845e11693f8}{du\+\_\+int}
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{math_8c_a86c9c257fc96e5d8128ef845e11693f8}{du\+\_\+int} \hyperlink{math_8c_a26df0a4f756848fbbd15711b92f7ddc0}{\+\_\+\+\_\+udivmoddi4} (\hyperlink{math_8c_a86c9c257fc96e5d8128ef845e11693f8}{du\+\_\+int} a, \hyperlink{math_8c_a86c9c257fc96e5d8128ef845e11693f8}{du\+\_\+int} b, \hyperlink{math_8c_a86c9c257fc96e5d8128ef845e11693f8}{du\+\_\+int} $\ast$rem)
\end{DoxyCompactItemize}


\subsection{Macro Definition Documentation}
\mbox{\Hypertarget{math_8c_a308d9dd2c0028ddb184b455bbd7865de}\label{math_8c_a308d9dd2c0028ddb184b455bbd7865de}} 
\index{math.\+c@{math.\+c}!C\+H\+A\+R\+\_\+\+B\+IT@{C\+H\+A\+R\+\_\+\+B\+IT}}
\index{C\+H\+A\+R\+\_\+\+B\+IT@{C\+H\+A\+R\+\_\+\+B\+IT}!math.\+c@{math.\+c}}
\subsubsection{\texorpdfstring{C\+H\+A\+R\+\_\+\+B\+IT}{CHAR\_BIT}}
{\footnotesize\ttfamily \#define C\+H\+A\+R\+\_\+\+B\+IT~8}



Definition at line 23 of file math.\+c.



\subsection{Typedef Documentation}
\mbox{\Hypertarget{math_8c_ac61d8e40091c07135fee5e0f6a7ca723}\label{math_8c_ac61d8e40091c07135fee5e0f6a7ca723}} 
\index{math.\+c@{math.\+c}!di\+\_\+int@{di\+\_\+int}}
\index{di\+\_\+int@{di\+\_\+int}!math.\+c@{math.\+c}}
\subsubsection{\texorpdfstring{di\+\_\+int}{di\_int}}
{\footnotesize\ttfamily typedef long long \hyperlink{math_8c_ac61d8e40091c07135fee5e0f6a7ca723}{di\+\_\+int}}



Definition at line 4 of file math.\+c.

\mbox{\Hypertarget{math_8c_a86c9c257fc96e5d8128ef845e11693f8}\label{math_8c_a86c9c257fc96e5d8128ef845e11693f8}} 
\index{math.\+c@{math.\+c}!du\+\_\+int@{du\+\_\+int}}
\index{du\+\_\+int@{du\+\_\+int}!math.\+c@{math.\+c}}
\subsubsection{\texorpdfstring{du\+\_\+int}{du\_int}}
{\footnotesize\ttfamily typedef unsigned long long \hyperlink{math_8c_a86c9c257fc96e5d8128ef845e11693f8}{du\+\_\+int}}



Definition at line 5 of file math.\+c.

\mbox{\Hypertarget{math_8c_a631e292730161ad5381eafff0013891e}\label{math_8c_a631e292730161ad5381eafff0013891e}} 
\index{math.\+c@{math.\+c}!si\+\_\+int@{si\+\_\+int}}
\index{si\+\_\+int@{si\+\_\+int}!math.\+c@{math.\+c}}
\subsubsection{\texorpdfstring{si\+\_\+int}{si\_int}}
{\footnotesize\ttfamily typedef int \hyperlink{math_8c_a631e292730161ad5381eafff0013891e}{si\+\_\+int}}



Definition at line 1 of file math.\+c.

\mbox{\Hypertarget{math_8c_ac80f361c8037aadb06208683492f5753}\label{math_8c_ac80f361c8037aadb06208683492f5753}} 
\index{math.\+c@{math.\+c}!su\+\_\+int@{su\+\_\+int}}
\index{su\+\_\+int@{su\+\_\+int}!math.\+c@{math.\+c}}
\subsubsection{\texorpdfstring{su\+\_\+int}{su\_int}}
{\footnotesize\ttfamily typedef unsigned \hyperlink{math_8c_ac80f361c8037aadb06208683492f5753}{su\+\_\+int}}



Definition at line 2 of file math.\+c.



\subsection{Function Documentation}
\mbox{\Hypertarget{math_8c_a26df0a4f756848fbbd15711b92f7ddc0}\label{math_8c_a26df0a4f756848fbbd15711b92f7ddc0}} 
\index{math.\+c@{math.\+c}!\+\_\+\+\_\+udivmoddi4@{\+\_\+\+\_\+udivmoddi4}}
\index{\+\_\+\+\_\+udivmoddi4@{\+\_\+\+\_\+udivmoddi4}!math.\+c@{math.\+c}}
\subsubsection{\texorpdfstring{\+\_\+\+\_\+udivmoddi4()}{\_\_udivmoddi4()}}
{\footnotesize\ttfamily \hyperlink{math_8c_a86c9c257fc96e5d8128ef845e11693f8}{du\+\_\+int} \+\_\+\+\_\+udivmoddi4 (\begin{DoxyParamCaption}\item[{\hyperlink{math_8c_a86c9c257fc96e5d8128ef845e11693f8}{du\+\_\+int}}]{a,  }\item[{\hyperlink{math_8c_a86c9c257fc96e5d8128ef845e11693f8}{du\+\_\+int}}]{b,  }\item[{\hyperlink{math_8c_a86c9c257fc96e5d8128ef845e11693f8}{du\+\_\+int} $\ast$}]{rem }\end{DoxyParamCaption})}



Definition at line 25 of file math.\+c.


\begin{DoxyCode}
25                                                      \{
26   \textcolor{keyword}{const} \textcolor{keywordtype}{unsigned} n\_uword\_bits = \textcolor{keyword}{sizeof}(\hyperlink{math_8c_ac80f361c8037aadb06208683492f5753}{su\_int}) * \hyperlink{math_8c_a308d9dd2c0028ddb184b455bbd7865de}{CHAR\_BIT};
27   \textcolor{keyword}{const} \textcolor{keywordtype}{unsigned} n\_udword\_bits = \textcolor{keyword}{sizeof}(\hyperlink{math_8c_a86c9c257fc96e5d8128ef845e11693f8}{du\_int}) * \hyperlink{math_8c_a308d9dd2c0028ddb184b455bbd7865de}{CHAR\_BIT};
28   \hyperlink{unionudwords}{udwords} n;
29   n.\hyperlink{unionudwords_aa22770fbb4b2f35a327c668f2b9cfafb}{all} = a;
30   \hyperlink{unionudwords}{udwords} d;
31   d.\hyperlink{unionudwords_aa22770fbb4b2f35a327c668f2b9cfafb}{all} = b;
32   \hyperlink{unionudwords}{udwords} q;
33   \hyperlink{unionudwords}{udwords} r;
34   \textcolor{keywordtype}{unsigned} sr;
35   \textcolor{comment}{// special cases, X is unknown, K != 0}
36   \textcolor{keywordflow}{if} (n.\hyperlink{unionudwords_a007f8c39ee901bb8633f231faeb6c219}{s}.\hyperlink{unionudwords_ab71d57a34d32cc4a0250444dbe4364b0}{high} == 0) \{
37     \textcolor{keywordflow}{if} (d.\hyperlink{unionudwords_a007f8c39ee901bb8633f231faeb6c219}{s}.\hyperlink{unionudwords_ab71d57a34d32cc4a0250444dbe4364b0}{high} == 0) \{
38       \textcolor{comment}{// 0 X}
39       \textcolor{comment}{// ---}
40       \textcolor{comment}{// 0 X}
41       \textcolor{keywordflow}{if} (rem)
42         *rem = n.\hyperlink{unionudwords_a007f8c39ee901bb8633f231faeb6c219}{s}.\hyperlink{unionudwords_aa8808d04ef26a57c2797d761b736379d}{low} % d.\hyperlink{unionudwords_a007f8c39ee901bb8633f231faeb6c219}{s}.\hyperlink{unionudwords_aa8808d04ef26a57c2797d761b736379d}{low};
43       \textcolor{keywordflow}{return} n.\hyperlink{unionudwords_a007f8c39ee901bb8633f231faeb6c219}{s}.\hyperlink{unionudwords_aa8808d04ef26a57c2797d761b736379d}{low} / d.\hyperlink{unionudwords_a007f8c39ee901bb8633f231faeb6c219}{s}.\hyperlink{unionudwords_aa8808d04ef26a57c2797d761b736379d}{low};
44     \}
45     \textcolor{comment}{// 0 X}
46     \textcolor{comment}{// ---}
47     \textcolor{comment}{// K X}
48     \textcolor{keywordflow}{if} (rem)
49       *rem = n.\hyperlink{unionudwords_a007f8c39ee901bb8633f231faeb6c219}{s}.\hyperlink{unionudwords_aa8808d04ef26a57c2797d761b736379d}{low};
50     \textcolor{keywordflow}{return} 0;
51   \}
52   \textcolor{comment}{// n.s.high != 0}
53   \textcolor{keywordflow}{if} (d.\hyperlink{unionudwords_a007f8c39ee901bb8633f231faeb6c219}{s}.\hyperlink{unionudwords_aa8808d04ef26a57c2797d761b736379d}{low} == 0) \{
54     \textcolor{keywordflow}{if} (d.\hyperlink{unionudwords_a007f8c39ee901bb8633f231faeb6c219}{s}.\hyperlink{unionudwords_ab71d57a34d32cc4a0250444dbe4364b0}{high} == 0) \{
55       \textcolor{comment}{// K X}
56       \textcolor{comment}{// ---}
57       \textcolor{comment}{// 0 0}
58       \textcolor{keywordflow}{if} (rem)
59         *rem = n.\hyperlink{unionudwords_a007f8c39ee901bb8633f231faeb6c219}{s}.\hyperlink{unionudwords_ab71d57a34d32cc4a0250444dbe4364b0}{high} % d.\hyperlink{unionudwords_a007f8c39ee901bb8633f231faeb6c219}{s}.\hyperlink{unionudwords_aa8808d04ef26a57c2797d761b736379d}{low};
60       \textcolor{keywordflow}{return} n.\hyperlink{unionudwords_a007f8c39ee901bb8633f231faeb6c219}{s}.\hyperlink{unionudwords_ab71d57a34d32cc4a0250444dbe4364b0}{high} / d.\hyperlink{unionudwords_a007f8c39ee901bb8633f231faeb6c219}{s}.\hyperlink{unionudwords_aa8808d04ef26a57c2797d761b736379d}{low};
61     \}
62     \textcolor{comment}{// d.s.high != 0}
63     \textcolor{keywordflow}{if} (n.\hyperlink{unionudwords_a007f8c39ee901bb8633f231faeb6c219}{s}.\hyperlink{unionudwords_aa8808d04ef26a57c2797d761b736379d}{low} == 0) \{
64       \textcolor{comment}{// K 0}
65       \textcolor{comment}{// ---}
66       \textcolor{comment}{// K 0}
67       \textcolor{keywordflow}{if} (rem) \{
68         r.\hyperlink{unionudwords_a007f8c39ee901bb8633f231faeb6c219}{s}.\hyperlink{unionudwords_ab71d57a34d32cc4a0250444dbe4364b0}{high} = n.\hyperlink{unionudwords_a007f8c39ee901bb8633f231faeb6c219}{s}.\hyperlink{unionudwords_ab71d57a34d32cc4a0250444dbe4364b0}{high} % d.\hyperlink{unionudwords_a007f8c39ee901bb8633f231faeb6c219}{s}.\hyperlink{unionudwords_ab71d57a34d32cc4a0250444dbe4364b0}{high};
69         r.\hyperlink{unionudwords_a007f8c39ee901bb8633f231faeb6c219}{s}.\hyperlink{unionudwords_aa8808d04ef26a57c2797d761b736379d}{low} = 0;
70         *rem = r.\hyperlink{unionudwords_aa22770fbb4b2f35a327c668f2b9cfafb}{all};
71       \}
72       \textcolor{keywordflow}{return} n.\hyperlink{unionudwords_a007f8c39ee901bb8633f231faeb6c219}{s}.\hyperlink{unionudwords_ab71d57a34d32cc4a0250444dbe4364b0}{high} / d.\hyperlink{unionudwords_a007f8c39ee901bb8633f231faeb6c219}{s}.\hyperlink{unionudwords_ab71d57a34d32cc4a0250444dbe4364b0}{high};
73     \}
74     \textcolor{comment}{// K K}
75     \textcolor{comment}{// ---}
76     \textcolor{comment}{// K 0}
77     \textcolor{keywordflow}{if} ((d.\hyperlink{unionudwords_a007f8c39ee901bb8633f231faeb6c219}{s}.\hyperlink{unionudwords_ab71d57a34d32cc4a0250444dbe4364b0}{high} & (d.\hyperlink{unionudwords_a007f8c39ee901bb8633f231faeb6c219}{s}.\hyperlink{unionudwords_ab71d57a34d32cc4a0250444dbe4364b0}{high} - 1)) == 0) \textcolor{comment}{/* if d is a power of 2 */} \{
78       \textcolor{keywordflow}{if} (rem) \{
79         r.\hyperlink{unionudwords_a007f8c39ee901bb8633f231faeb6c219}{s}.\hyperlink{unionudwords_aa8808d04ef26a57c2797d761b736379d}{low} = n.\hyperlink{unionudwords_a007f8c39ee901bb8633f231faeb6c219}{s}.\hyperlink{unionudwords_aa8808d04ef26a57c2797d761b736379d}{low};
80         r.\hyperlink{unionudwords_a007f8c39ee901bb8633f231faeb6c219}{s}.\hyperlink{unionudwords_ab71d57a34d32cc4a0250444dbe4364b0}{high} = n.\hyperlink{unionudwords_a007f8c39ee901bb8633f231faeb6c219}{s}.\hyperlink{unionudwords_ab71d57a34d32cc4a0250444dbe4364b0}{high} & (d.\hyperlink{unionudwords_a007f8c39ee901bb8633f231faeb6c219}{s}.\hyperlink{unionudwords_ab71d57a34d32cc4a0250444dbe4364b0}{high} - 1);
81         *rem = r.\hyperlink{unionudwords_aa22770fbb4b2f35a327c668f2b9cfafb}{all};
82       \}
83       \textcolor{keywordflow}{return} n.\hyperlink{unionudwords_a007f8c39ee901bb8633f231faeb6c219}{s}.\hyperlink{unionudwords_ab71d57a34d32cc4a0250444dbe4364b0}{high} >> \_\_builtin\_ctz(d.\hyperlink{unionudwords_a007f8c39ee901bb8633f231faeb6c219}{s}.\hyperlink{unionudwords_ab71d57a34d32cc4a0250444dbe4364b0}{high});
84     \}
85     \textcolor{comment}{// K K}
86     \textcolor{comment}{// ---}
87     \textcolor{comment}{// K 0}
88     sr = \_\_builtin\_clz(d.\hyperlink{unionudwords_a007f8c39ee901bb8633f231faeb6c219}{s}.\hyperlink{unionudwords_ab71d57a34d32cc4a0250444dbe4364b0}{high}) - \_\_builtin\_clz(n.\hyperlink{unionudwords_a007f8c39ee901bb8633f231faeb6c219}{s}.\hyperlink{unionudwords_ab71d57a34d32cc4a0250444dbe4364b0}{high});
89     \textcolor{comment}{// 0 <= sr <= n\_uword\_bits - 2 or sr large}
90     \textcolor{keywordflow}{if} (sr > n\_uword\_bits - 2) \{
91       \textcolor{keywordflow}{if} (rem)
92         *rem = n.\hyperlink{unionudwords_aa22770fbb4b2f35a327c668f2b9cfafb}{all};
93       \textcolor{keywordflow}{return} 0;
94     \}
95     ++sr;
96     \textcolor{comment}{// 1 <= sr <= n\_uword\_bits - 1}
97     \textcolor{comment}{// q.all = n.all << (n\_udword\_bits - sr);}
98     q.\hyperlink{unionudwords_a007f8c39ee901bb8633f231faeb6c219}{s}.\hyperlink{unionudwords_aa8808d04ef26a57c2797d761b736379d}{low} = 0;
99     q.\hyperlink{unionudwords_a007f8c39ee901bb8633f231faeb6c219}{s}.\hyperlink{unionudwords_ab71d57a34d32cc4a0250444dbe4364b0}{high} = n.\hyperlink{unionudwords_a007f8c39ee901bb8633f231faeb6c219}{s}.\hyperlink{unionudwords_aa8808d04ef26a57c2797d761b736379d}{low} << (n\_uword\_bits - sr);
100     \textcolor{comment}{// r.all = n.all >> sr;}
101     r.\hyperlink{unionudwords_a007f8c39ee901bb8633f231faeb6c219}{s}.\hyperlink{unionudwords_ab71d57a34d32cc4a0250444dbe4364b0}{high} = n.\hyperlink{unionudwords_a007f8c39ee901bb8633f231faeb6c219}{s}.\hyperlink{unionudwords_ab71d57a34d32cc4a0250444dbe4364b0}{high} >> sr;
102     r.\hyperlink{unionudwords_a007f8c39ee901bb8633f231faeb6c219}{s}.\hyperlink{unionudwords_aa8808d04ef26a57c2797d761b736379d}{low} = (n.\hyperlink{unionudwords_a007f8c39ee901bb8633f231faeb6c219}{s}.\hyperlink{unionudwords_ab71d57a34d32cc4a0250444dbe4364b0}{high} << (n\_uword\_bits - sr)) | (n.\hyperlink{unionudwords_a007f8c39ee901bb8633f231faeb6c219}{s}.\hyperlink{unionudwords_aa8808d04ef26a57c2797d761b736379d}{low} >> sr);
103   \} \textcolor{keywordflow}{else} \textcolor{comment}{/* d.s.low != 0 */} \{
104     \textcolor{keywordflow}{if} (d.\hyperlink{unionudwords_a007f8c39ee901bb8633f231faeb6c219}{s}.\hyperlink{unionudwords_ab71d57a34d32cc4a0250444dbe4364b0}{high} == 0) \{
105       \textcolor{comment}{// K X}
106       \textcolor{comment}{// ---}
107       \textcolor{comment}{// 0 K}
108       \textcolor{keywordflow}{if} ((d.\hyperlink{unionudwords_a007f8c39ee901bb8633f231faeb6c219}{s}.\hyperlink{unionudwords_aa8808d04ef26a57c2797d761b736379d}{low} & (d.\hyperlink{unionudwords_a007f8c39ee901bb8633f231faeb6c219}{s}.\hyperlink{unionudwords_aa8808d04ef26a57c2797d761b736379d}{low} - 1)) == 0) \textcolor{comment}{/* if d is a power of 2 */} \{
109         \textcolor{keywordflow}{if} (rem)
110           *rem = n.\hyperlink{unionudwords_a007f8c39ee901bb8633f231faeb6c219}{s}.\hyperlink{unionudwords_aa8808d04ef26a57c2797d761b736379d}{low} & (d.\hyperlink{unionudwords_a007f8c39ee901bb8633f231faeb6c219}{s}.\hyperlink{unionudwords_aa8808d04ef26a57c2797d761b736379d}{low} - 1);
111         \textcolor{keywordflow}{if} (d.\hyperlink{unionudwords_a007f8c39ee901bb8633f231faeb6c219}{s}.\hyperlink{unionudwords_aa8808d04ef26a57c2797d761b736379d}{low} == 1)
112           \textcolor{keywordflow}{return} n.\hyperlink{unionudwords_aa22770fbb4b2f35a327c668f2b9cfafb}{all};
113         sr = \_\_builtin\_ctz(d.\hyperlink{unionudwords_a007f8c39ee901bb8633f231faeb6c219}{s}.\hyperlink{unionudwords_aa8808d04ef26a57c2797d761b736379d}{low});
114         q.\hyperlink{unionudwords_a007f8c39ee901bb8633f231faeb6c219}{s}.\hyperlink{unionudwords_ab71d57a34d32cc4a0250444dbe4364b0}{high} = n.\hyperlink{unionudwords_a007f8c39ee901bb8633f231faeb6c219}{s}.\hyperlink{unionudwords_ab71d57a34d32cc4a0250444dbe4364b0}{high} >> sr;
115         q.\hyperlink{unionudwords_a007f8c39ee901bb8633f231faeb6c219}{s}.\hyperlink{unionudwords_aa8808d04ef26a57c2797d761b736379d}{low} = (n.\hyperlink{unionudwords_a007f8c39ee901bb8633f231faeb6c219}{s}.\hyperlink{unionudwords_ab71d57a34d32cc4a0250444dbe4364b0}{high} << (n\_uword\_bits - sr)) | (n.\hyperlink{unionudwords_a007f8c39ee901bb8633f231faeb6c219}{s}.\hyperlink{unionudwords_aa8808d04ef26a57c2797d761b736379d}{low} >> sr);
116         \textcolor{keywordflow}{return} q.\hyperlink{unionudwords_aa22770fbb4b2f35a327c668f2b9cfafb}{all};
117       \}
118       \textcolor{comment}{// K X}
119       \textcolor{comment}{// ---}
120       \textcolor{comment}{// 0 K}
121       sr = 1 + n\_uword\_bits + \_\_builtin\_clz(d.\hyperlink{unionudwords_a007f8c39ee901bb8633f231faeb6c219}{s}.\hyperlink{unionudwords_aa8808d04ef26a57c2797d761b736379d}{low}) - \_\_builtin\_clz(n.\hyperlink{unionudwords_a007f8c39ee901bb8633f231faeb6c219}{s}.
      \hyperlink{unionudwords_ab71d57a34d32cc4a0250444dbe4364b0}{high});
122       \textcolor{comment}{// 2 <= sr <= n\_udword\_bits - 1}
123       \textcolor{comment}{// q.all = n.all << (n\_udword\_bits - sr);}
124       \textcolor{comment}{// r.all = n.all >> sr;}
125       \textcolor{keywordflow}{if} (sr == n\_uword\_bits) \{
126         q.\hyperlink{unionudwords_a007f8c39ee901bb8633f231faeb6c219}{s}.\hyperlink{unionudwords_aa8808d04ef26a57c2797d761b736379d}{low} = 0;
127         q.\hyperlink{unionudwords_a007f8c39ee901bb8633f231faeb6c219}{s}.\hyperlink{unionudwords_ab71d57a34d32cc4a0250444dbe4364b0}{high} = n.\hyperlink{unionudwords_a007f8c39ee901bb8633f231faeb6c219}{s}.\hyperlink{unionudwords_aa8808d04ef26a57c2797d761b736379d}{low};
128         r.\hyperlink{unionudwords_a007f8c39ee901bb8633f231faeb6c219}{s}.\hyperlink{unionudwords_ab71d57a34d32cc4a0250444dbe4364b0}{high} = 0;
129         r.\hyperlink{unionudwords_a007f8c39ee901bb8633f231faeb6c219}{s}.\hyperlink{unionudwords_aa8808d04ef26a57c2797d761b736379d}{low} = n.\hyperlink{unionudwords_a007f8c39ee901bb8633f231faeb6c219}{s}.\hyperlink{unionudwords_ab71d57a34d32cc4a0250444dbe4364b0}{high};
130       \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (sr < n\_uword\_bits) \textcolor{comment}{/* 2 <= sr <= n\_uword\_bits - 1 */} \{
131         q.\hyperlink{unionudwords_a007f8c39ee901bb8633f231faeb6c219}{s}.\hyperlink{unionudwords_aa8808d04ef26a57c2797d761b736379d}{low} = 0;
132         q.\hyperlink{unionudwords_a007f8c39ee901bb8633f231faeb6c219}{s}.\hyperlink{unionudwords_ab71d57a34d32cc4a0250444dbe4364b0}{high} = n.\hyperlink{unionudwords_a007f8c39ee901bb8633f231faeb6c219}{s}.\hyperlink{unionudwords_aa8808d04ef26a57c2797d761b736379d}{low} << (n\_uword\_bits - sr);
133         r.\hyperlink{unionudwords_a007f8c39ee901bb8633f231faeb6c219}{s}.\hyperlink{unionudwords_ab71d57a34d32cc4a0250444dbe4364b0}{high} = n.\hyperlink{unionudwords_a007f8c39ee901bb8633f231faeb6c219}{s}.\hyperlink{unionudwords_ab71d57a34d32cc4a0250444dbe4364b0}{high} >> sr;
134         r.\hyperlink{unionudwords_a007f8c39ee901bb8633f231faeb6c219}{s}.\hyperlink{unionudwords_aa8808d04ef26a57c2797d761b736379d}{low} = (n.\hyperlink{unionudwords_a007f8c39ee901bb8633f231faeb6c219}{s}.\hyperlink{unionudwords_ab71d57a34d32cc4a0250444dbe4364b0}{high} << (n\_uword\_bits - sr)) | (n.\hyperlink{unionudwords_a007f8c39ee901bb8633f231faeb6c219}{s}.\hyperlink{unionudwords_aa8808d04ef26a57c2797d761b736379d}{low} >> sr);
135       \} \textcolor{keywordflow}{else} \textcolor{comment}{/* n\_uword\_bits + 1 <= sr <= n\_udword\_bits - 1 */} \{
136         q.\hyperlink{unionudwords_a007f8c39ee901bb8633f231faeb6c219}{s}.\hyperlink{unionudwords_aa8808d04ef26a57c2797d761b736379d}{low} = n.\hyperlink{unionudwords_a007f8c39ee901bb8633f231faeb6c219}{s}.\hyperlink{unionudwords_aa8808d04ef26a57c2797d761b736379d}{low} << (n\_udword\_bits - sr);
137         q.\hyperlink{unionudwords_a007f8c39ee901bb8633f231faeb6c219}{s}.\hyperlink{unionudwords_ab71d57a34d32cc4a0250444dbe4364b0}{high} = (n.\hyperlink{unionudwords_a007f8c39ee901bb8633f231faeb6c219}{s}.\hyperlink{unionudwords_ab71d57a34d32cc4a0250444dbe4364b0}{high} << (n\_udword\_bits - sr)) |
138                    (n.\hyperlink{unionudwords_a007f8c39ee901bb8633f231faeb6c219}{s}.\hyperlink{unionudwords_aa8808d04ef26a57c2797d761b736379d}{low} >> (sr - n\_uword\_bits));
139         r.\hyperlink{unionudwords_a007f8c39ee901bb8633f231faeb6c219}{s}.\hyperlink{unionudwords_ab71d57a34d32cc4a0250444dbe4364b0}{high} = 0;
140         r.\hyperlink{unionudwords_a007f8c39ee901bb8633f231faeb6c219}{s}.\hyperlink{unionudwords_aa8808d04ef26a57c2797d761b736379d}{low} = n.\hyperlink{unionudwords_a007f8c39ee901bb8633f231faeb6c219}{s}.\hyperlink{unionudwords_ab71d57a34d32cc4a0250444dbe4364b0}{high} >> (sr - n\_uword\_bits);
141       \}
142     \} \textcolor{keywordflow}{else} \{
143       \textcolor{comment}{// K X}
144       \textcolor{comment}{// ---}
145       \textcolor{comment}{// K K}
146       sr = \_\_builtin\_clz(d.\hyperlink{unionudwords_a007f8c39ee901bb8633f231faeb6c219}{s}.\hyperlink{unionudwords_ab71d57a34d32cc4a0250444dbe4364b0}{high}) - \_\_builtin\_clz(n.\hyperlink{unionudwords_a007f8c39ee901bb8633f231faeb6c219}{s}.\hyperlink{unionudwords_ab71d57a34d32cc4a0250444dbe4364b0}{high});
147       \textcolor{comment}{// 0 <= sr <= n\_uword\_bits - 1 or sr large}
148       \textcolor{keywordflow}{if} (sr > n\_uword\_bits - 1) \{
149         \textcolor{keywordflow}{if} (rem)
150           *rem = n.\hyperlink{unionudwords_aa22770fbb4b2f35a327c668f2b9cfafb}{all};
151         \textcolor{keywordflow}{return} 0;
152       \}
153       ++sr;
154       \textcolor{comment}{// 1 <= sr <= n\_uword\_bits}
155       \textcolor{comment}{// q.all = n.all << (n\_udword\_bits - sr);}
156       q.\hyperlink{unionudwords_a007f8c39ee901bb8633f231faeb6c219}{s}.\hyperlink{unionudwords_aa8808d04ef26a57c2797d761b736379d}{low} = 0;
157       \textcolor{keywordflow}{if} (sr == n\_uword\_bits) \{
158         q.\hyperlink{unionudwords_a007f8c39ee901bb8633f231faeb6c219}{s}.\hyperlink{unionudwords_ab71d57a34d32cc4a0250444dbe4364b0}{high} = n.\hyperlink{unionudwords_a007f8c39ee901bb8633f231faeb6c219}{s}.\hyperlink{unionudwords_aa8808d04ef26a57c2797d761b736379d}{low};
159         r.\hyperlink{unionudwords_a007f8c39ee901bb8633f231faeb6c219}{s}.\hyperlink{unionudwords_ab71d57a34d32cc4a0250444dbe4364b0}{high} = 0;
160         r.\hyperlink{unionudwords_a007f8c39ee901bb8633f231faeb6c219}{s}.\hyperlink{unionudwords_aa8808d04ef26a57c2797d761b736379d}{low} = n.\hyperlink{unionudwords_a007f8c39ee901bb8633f231faeb6c219}{s}.\hyperlink{unionudwords_ab71d57a34d32cc4a0250444dbe4364b0}{high};
161       \} \textcolor{keywordflow}{else} \{
162         q.\hyperlink{unionudwords_a007f8c39ee901bb8633f231faeb6c219}{s}.\hyperlink{unionudwords_ab71d57a34d32cc4a0250444dbe4364b0}{high} = n.\hyperlink{unionudwords_a007f8c39ee901bb8633f231faeb6c219}{s}.\hyperlink{unionudwords_aa8808d04ef26a57c2797d761b736379d}{low} << (n\_uword\_bits - sr);
163         r.\hyperlink{unionudwords_a007f8c39ee901bb8633f231faeb6c219}{s}.\hyperlink{unionudwords_ab71d57a34d32cc4a0250444dbe4364b0}{high} = n.\hyperlink{unionudwords_a007f8c39ee901bb8633f231faeb6c219}{s}.\hyperlink{unionudwords_ab71d57a34d32cc4a0250444dbe4364b0}{high} >> sr;
164         r.\hyperlink{unionudwords_a007f8c39ee901bb8633f231faeb6c219}{s}.\hyperlink{unionudwords_aa8808d04ef26a57c2797d761b736379d}{low} = (n.\hyperlink{unionudwords_a007f8c39ee901bb8633f231faeb6c219}{s}.\hyperlink{unionudwords_ab71d57a34d32cc4a0250444dbe4364b0}{high} << (n\_uword\_bits - sr)) | (n.\hyperlink{unionudwords_a007f8c39ee901bb8633f231faeb6c219}{s}.\hyperlink{unionudwords_aa8808d04ef26a57c2797d761b736379d}{low} >> sr);
165       \}
166     \}
167   \}
168   \textcolor{comment}{// Not a special case}
169   \textcolor{comment}{// q and r are initialized with:}
170   \textcolor{comment}{// q.all = n.all << (n\_udword\_bits - sr);}
171   \textcolor{comment}{// r.all = n.all >> sr;}
172   \textcolor{comment}{// 1 <= sr <= n\_udword\_bits - 1}
173   \hyperlink{math_8c_ac80f361c8037aadb06208683492f5753}{su\_int} carry = 0;
174   \textcolor{keywordflow}{for} (; sr > 0; --sr) \{
175     \textcolor{comment}{// r:q = ((r:q)  << 1) | carry}
176     r.\hyperlink{unionudwords_a007f8c39ee901bb8633f231faeb6c219}{s}.\hyperlink{unionudwords_ab71d57a34d32cc4a0250444dbe4364b0}{high} = (r.\hyperlink{unionudwords_a007f8c39ee901bb8633f231faeb6c219}{s}.\hyperlink{unionudwords_ab71d57a34d32cc4a0250444dbe4364b0}{high} << 1) | (r.\hyperlink{unionudwords_a007f8c39ee901bb8633f231faeb6c219}{s}.\hyperlink{unionudwords_aa8808d04ef26a57c2797d761b736379d}{low} >> (n\_uword\_bits - 1));
177     r.\hyperlink{unionudwords_a007f8c39ee901bb8633f231faeb6c219}{s}.\hyperlink{unionudwords_aa8808d04ef26a57c2797d761b736379d}{low} = (r.\hyperlink{unionudwords_a007f8c39ee901bb8633f231faeb6c219}{s}.\hyperlink{unionudwords_aa8808d04ef26a57c2797d761b736379d}{low} << 1) | (q.\hyperlink{unionudwords_a007f8c39ee901bb8633f231faeb6c219}{s}.\hyperlink{unionudwords_ab71d57a34d32cc4a0250444dbe4364b0}{high} >> (n\_uword\_bits - 1));
178     q.\hyperlink{unionudwords_a007f8c39ee901bb8633f231faeb6c219}{s}.\hyperlink{unionudwords_ab71d57a34d32cc4a0250444dbe4364b0}{high} = (q.\hyperlink{unionudwords_a007f8c39ee901bb8633f231faeb6c219}{s}.\hyperlink{unionudwords_ab71d57a34d32cc4a0250444dbe4364b0}{high} << 1) | (q.\hyperlink{unionudwords_a007f8c39ee901bb8633f231faeb6c219}{s}.\hyperlink{unionudwords_aa8808d04ef26a57c2797d761b736379d}{low} >> (n\_uword\_bits - 1));
179     q.\hyperlink{unionudwords_a007f8c39ee901bb8633f231faeb6c219}{s}.\hyperlink{unionudwords_aa8808d04ef26a57c2797d761b736379d}{low} = (q.\hyperlink{unionudwords_a007f8c39ee901bb8633f231faeb6c219}{s}.\hyperlink{unionudwords_aa8808d04ef26a57c2797d761b736379d}{low} << 1) | carry;
180     \textcolor{comment}{// carry = 0;}
181     \textcolor{comment}{// if (r.all >= d.all)}
182     \textcolor{comment}{// \{}
183     \textcolor{comment}{//      r.all -= d.all;}
184     \textcolor{comment}{//      carry = 1;}
185     \textcolor{comment}{// \}}
186     \textcolor{keyword}{const} \hyperlink{math_8c_ac61d8e40091c07135fee5e0f6a7ca723}{di\_int} s = (\hyperlink{math_8c_ac61d8e40091c07135fee5e0f6a7ca723}{di\_int})(d.\hyperlink{unionudwords_aa22770fbb4b2f35a327c668f2b9cfafb}{all} - r.\hyperlink{unionudwords_aa22770fbb4b2f35a327c668f2b9cfafb}{all} - 1) >> (n\_udword\_bits - 1);
187     carry = s & 1;
188     r.\hyperlink{unionudwords_aa22770fbb4b2f35a327c668f2b9cfafb}{all} -= d.\hyperlink{unionudwords_aa22770fbb4b2f35a327c668f2b9cfafb}{all} & s;
189   \}
190   q.\hyperlink{unionudwords_aa22770fbb4b2f35a327c668f2b9cfafb}{all} = (q.\hyperlink{unionudwords_aa22770fbb4b2f35a327c668f2b9cfafb}{all} << 1) | carry;
191   \textcolor{keywordflow}{if} (rem)
192     *rem = r.\hyperlink{unionudwords_aa22770fbb4b2f35a327c668f2b9cfafb}{all};
193   \textcolor{keywordflow}{return} q.\hyperlink{unionudwords_aa22770fbb4b2f35a327c668f2b9cfafb}{all};
194 \}
\end{DoxyCode}
