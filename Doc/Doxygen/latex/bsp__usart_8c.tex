\hypertarget{bsp__usart_8c}{}\section{Kernel/\+Sources/arch/board/stm32/f401re/src/bsp\+\_\+usart.c File Reference}
\label{bsp__usart_8c}\index{Kernel/\+Sources/arch/board/stm32/f401re/src/bsp\+\_\+usart.\+c@{Kernel/\+Sources/arch/board/stm32/f401re/src/bsp\+\_\+usart.\+c}}
{\ttfamily \#include \char`\"{}error\+\_\+types.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}bsp\+\_\+usart.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}bsp\+\_\+clocks.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}serial.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}config.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}stddef.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}logger.\+h\char`\"{}}\newline
Include dependency graph for bsp\+\_\+usart.\+c\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{bsp__usart_8c__incl}
\end{center}
\end{figure}
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \hyperlink{bsp__usart_8c_a8aa979774d50a01cae417a899595055c}{C\+H\+E\+C\+K\+\_\+\+B\+A\+U\+D\+R\+A\+TE}(baudrate)
\begin{DoxyCompactList}\small\item\em Checks the baudrate setting conformity. \end{DoxyCompactList}\item 
\#define \hyperlink{bsp__usart_8c_a51885194f22c4bd5f94ab0bb253dd079}{C\+H\+E\+C\+K\+\_\+\+W\+D\+L\+E\+N\+G\+TH}(wdlength)
\begin{DoxyCompactList}\small\item\em Checks the word length setting conformity. \end{DoxyCompactList}\item 
\#define \hyperlink{bsp__usart_8c_ace359bfb3e864f995667f829a5520105}{C\+H\+E\+C\+K\+\_\+\+S\+T\+O\+P\+B\+I\+TS}(stpbits)
\begin{DoxyCompactList}\small\item\em Checks the stop bits setting conformity. \end{DoxyCompactList}\item 
\#define \hyperlink{bsp__usart_8c_a2c164787cf0d531b3c026aa2b9193a2b}{C\+H\+E\+C\+K\+\_\+\+P\+A\+R\+I\+T\+Y\+VA}(parity)
\begin{DoxyCompactList}\small\item\em Checks the parity setting conformity. \end{DoxyCompactList}\item 
\#define \hyperlink{bsp__usart_8c_a47ca255399a13357557641c6af83af64}{C\+H\+E\+C\+K\+\_\+\+C\+T\+R\+L\+F\+L\+OW}(ctrlflow)
\begin{DoxyCompactList}\small\item\em Checks the flow control setting conformity. \end{DoxyCompactList}\item 
\#define \hyperlink{bsp__usart_8c_a3fb76e1ecccca1505a00f7cbf6cbe2d2}{U\+S\+A\+R\+T\+\_\+\+G\+E\+T\+\_\+\+B\+R\+R\+\_\+\+D\+I\+V\+\_\+\+M\+A\+N\+T\+\_\+16}(f,  b)~((\hyperlink{stdint_8h_aaa5d1cd013383c889537491c3cfd9aad}{uint64\+\_\+t})f / ((\hyperlink{stdint_8h_aaa5d1cd013383c889537491c3cfd9aad}{uint64\+\_\+t})16 $\ast$ (\hyperlink{stdint_8h_aaa5d1cd013383c889537491c3cfd9aad}{uint64\+\_\+t})b))
\begin{DoxyCompactList}\small\item\em Compute the B\+RR bivider mantissa for a 16 bit oversampling. \end{DoxyCompactList}\item 
\#define \hyperlink{bsp__usart_8c_a34e3b693f024488a2a09c0b1c0f71f96}{U\+S\+A\+R\+T\+\_\+\+G\+E\+T\+\_\+\+B\+R\+R\+\_\+\+D\+I\+V\+\_\+\+F\+R\+A\+Q\+\_\+16}(f,  b)
\begin{DoxyCompactList}\small\item\em Compute the B\+RR bivider fraction for a 16 bit oversampling. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{bsp__usart_8c_a39d14fff7f007d639de7a6db12fd8acf}{bsp\+\_\+uart\+\_\+init} (const \hyperlink{bsp__usart_8h_a594f9d90a9a3875660da4512fb208cf9}{U\+S\+A\+R\+T\+\_\+\+I\+D\+E\+N\+T\+I\+F\+I\+E\+R\+\_\+E} usart\+\_\+id, const \hyperlink{serial_8h_acf007a933480ae3b580e6bccdc4b7c40}{S\+E\+R\+I\+A\+L\+\_\+\+S\+E\+T\+T\+I\+N\+G\+S\+\_\+T} $\ast$settings)
\begin{DoxyCompactList}\small\item\em Initializes the U\+S\+A\+RT as U\+A\+RT. \end{DoxyCompactList}\item 
void \hyperlink{bsp__usart_8c_a81aa58ca3b3ff2a16c5666f1601dedc7}{bsp\+\_\+usart\+\_\+disable} (const \hyperlink{bsp__usart_8h_a594f9d90a9a3875660da4512fb208cf9}{U\+S\+A\+R\+T\+\_\+\+I\+D\+E\+N\+T\+I\+F\+I\+E\+R\+\_\+E} usart\+\_\+id)
\begin{DoxyCompactList}\small\item\em Disables the U\+S\+A\+RT. \end{DoxyCompactList}\item 
void \hyperlink{bsp__usart_8c_ae71596fd1683989728deee59105b9b06}{bsp\+\_\+usart\+\_\+enable} (const \hyperlink{bsp__usart_8h_a594f9d90a9a3875660da4512fb208cf9}{U\+S\+A\+R\+T\+\_\+\+I\+D\+E\+N\+T\+I\+F\+I\+E\+R\+\_\+E} usart\+\_\+id)
\begin{DoxyCompactList}\small\item\em Enables the U\+S\+A\+RT. \end{DoxyCompactList}\item 
\hyperlink{error__types_8h_acf146bc98f60f47c79d782f7523e339c}{E\+R\+R\+O\+R\+\_\+\+C\+O\+D\+E\+\_\+E} \hyperlink{bsp__usart_8c_ac8063a6773891c77be25ad972f915f35}{serial\+\_\+init} (const \hyperlink{serial_8h_acf007a933480ae3b580e6bccdc4b7c40}{S\+E\+R\+I\+A\+L\+\_\+\+S\+E\+T\+T\+I\+N\+G\+S\+\_\+T} $\ast$settings)
\begin{DoxyCompactList}\small\item\em Initializes the serial line. \end{DoxyCompactList}\item 
\hyperlink{error__types_8h_acf146bc98f60f47c79d782f7523e339c}{E\+R\+R\+O\+R\+\_\+\+C\+O\+D\+E\+\_\+E} \hyperlink{bsp__usart_8c_a28c404f87f73ce3d02c889d4792d6a19}{serial\+\_\+write} (const char $\ast$str, const \hyperlink{stddef_8h_aa9d55e2f20e580b7445617d0d12fff6e}{size\+\_\+t} length)
\begin{DoxyCompactList}\small\item\em Writes a string of characters to the serial line. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\+\_\+t} \hyperlink{bsp__usart_8c_ad317e99f056e9ce535815fcdd1697c93}{usart\+\_\+init\+\_\+state} = 0
\begin{DoxyCompactList}\small\item\em Current usart initialization state. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Macro Definition Documentation}
\mbox{\Hypertarget{bsp__usart_8c_a8aa979774d50a01cae417a899595055c}\label{bsp__usart_8c_a8aa979774d50a01cae417a899595055c}} 
\index{bsp\+\_\+usart.\+c@{bsp\+\_\+usart.\+c}!C\+H\+E\+C\+K\+\_\+\+B\+A\+U\+D\+R\+A\+TE@{C\+H\+E\+C\+K\+\_\+\+B\+A\+U\+D\+R\+A\+TE}}
\index{C\+H\+E\+C\+K\+\_\+\+B\+A\+U\+D\+R\+A\+TE@{C\+H\+E\+C\+K\+\_\+\+B\+A\+U\+D\+R\+A\+TE}!bsp\+\_\+usart.\+c@{bsp\+\_\+usart.\+c}}
\subsubsection{\texorpdfstring{C\+H\+E\+C\+K\+\_\+\+B\+A\+U\+D\+R\+A\+TE}{CHECK\_BAUDRATE}}
{\footnotesize\ttfamily \#define C\+H\+E\+C\+K\+\_\+\+B\+A\+U\+D\+R\+A\+TE(\begin{DoxyParamCaption}\item[{}]{baudrate }\end{DoxyParamCaption})}

{\bfseries Value\+:}
\begin{DoxyCode}
(\{                                                          \(\backslash\)
    switch(baudrate)                                        \(\backslash\)
    \{                                                       \(\backslash\)
        case 1200:                                          \(\backslash\)
        case 2400:                                          \(\backslash\)
        case 9600:                                          \(\backslash\)
        case 19200:                                         \(\backslash\)
        case 38400:                                         \(\backslash\)
        case 57600:                                         \(\backslash\)
        case 115200:                                        \(\backslash\)
        case 256000:                                        \(\backslash\)
        case 460800:                                        \(\backslash\)
        case 921600:                                        \(\backslash\)
        case 1843200:                                       \(\backslash\)
            break;                                          \(\backslash\)
        default:                                            \(\backslash\)
            if(\hyperlink{config_8h_a6c272d2b12ffba9bdd5a4d5dd608a0f8}{KERNEL\_LOG\_LEVEL} == \hyperlink{config_8h_a023f94f341f2300adee0891b15b364b2}{ERROR\_LOG\_LEVEL})         \(\backslash\)
            \{                                               \(\backslash\)
                KERNEL\_LOG\_ERROR(\textcolor{stringliteral}{"Invalid USART baudrate"},  \(\backslash\)
                                 (\textcolor{keywordtype}{void}*)baudrate,           \(\backslash\)
                                 \textcolor{keyword}{sizeof}(baudrate),          \(\backslash\)
                                 \hyperlink{error__types_8h_a4db9ee29f2ff83c71567c12f6bfbf28cabbe6797281350f36c23d07d6f2d7f6e2}{ERROR\_INVALID\_PARAM});      \(\backslash\)
            \}                                               \(\backslash\)
                                                            \(\backslash\)
            return \hyperlink{error__types_8h_a4db9ee29f2ff83c71567c12f6bfbf28cabbe6797281350f36c23d07d6f2d7f6e2}{ERROR\_INVALID\_PARAM};                     \(\backslash\)
                                                            \(\backslash\)
    \}                                                       \(\backslash\)
\})
\end{DoxyCode}


Checks the baudrate setting conformity. 

This macro will return from the function it is used in if an error is detected. An error message will be logged and an invalid parameter error is returned.


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em baudrate} & The baudrate settings for the serial line. \\
\hline
\end{DoxyParams}


Definition at line 46 of file bsp\+\_\+usart.\+c.

\mbox{\Hypertarget{bsp__usart_8c_a47ca255399a13357557641c6af83af64}\label{bsp__usart_8c_a47ca255399a13357557641c6af83af64}} 
\index{bsp\+\_\+usart.\+c@{bsp\+\_\+usart.\+c}!C\+H\+E\+C\+K\+\_\+\+C\+T\+R\+L\+F\+L\+OW@{C\+H\+E\+C\+K\+\_\+\+C\+T\+R\+L\+F\+L\+OW}}
\index{C\+H\+E\+C\+K\+\_\+\+C\+T\+R\+L\+F\+L\+OW@{C\+H\+E\+C\+K\+\_\+\+C\+T\+R\+L\+F\+L\+OW}!bsp\+\_\+usart.\+c@{bsp\+\_\+usart.\+c}}
\subsubsection{\texorpdfstring{C\+H\+E\+C\+K\+\_\+\+C\+T\+R\+L\+F\+L\+OW}{CHECK\_CTRLFLOW}}
{\footnotesize\ttfamily \#define C\+H\+E\+C\+K\+\_\+\+C\+T\+R\+L\+F\+L\+OW(\begin{DoxyParamCaption}\item[{}]{ctrlflow }\end{DoxyParamCaption})}

{\bfseries Value\+:}
\begin{DoxyCode}
(\{                                                             \(\backslash\)
    switch(ctrlflow)                                           \(\backslash\)
    \{                                                          \(\backslash\)
        case \hyperlink{serial_8h_ab85f99523d332a127bd78d8fd075e9f4}{SERIAL\_CTRL\_FLOW\_NONE}:                            \(\backslash\)
        case \hyperlink{serial_8h_a0d44b3d3d3e5bb25dc7b976dc2acd4d6}{SERIAL\_CTRL\_FLOW\_CTS}:                             \(\backslash\)
        case \hyperlink{serial_8h_a2335857b5c95b76430e052c05f6e71b5}{SERIAL\_CTRL\_FLOW\_RTS}:                             \(\backslash\)
        case \hyperlink{serial_8h_a5eadb2a7b63f2b5483b5c4aed197d99a}{SERIAL\_CTRL\_FLOW\_CTS\_RTS}:                         \(\backslash\)
            break;                                             \(\backslash\)
        default:                                               \(\backslash\)
            if(\hyperlink{config_8h_a6c272d2b12ffba9bdd5a4d5dd608a0f8}{KERNEL\_LOG\_LEVEL} == \hyperlink{config_8h_a023f94f341f2300adee0891b15b364b2}{ERROR\_LOG\_LEVEL})            \(\backslash\)
            \{                                                  \(\backslash\)
                KERNEL\_LOG\_ERROR(\textcolor{stringliteral}{"Invalid USART control flow"}, \(\backslash\)
                                 (\textcolor{keywordtype}{void}*)(\hyperlink{stdint_8h_a324c5d28c0d82f502a234ab99efac87a}{uint32\_t})ctrlflow,    \(\backslash\)
                                 \textcolor{keyword}{sizeof}(ctrlflow),             \(\backslash\)
                                 \hyperlink{error__types_8h_a4db9ee29f2ff83c71567c12f6bfbf28cabbe6797281350f36c23d07d6f2d7f6e2}{ERROR\_INVALID\_PARAM});         \(\backslash\)
            \}                                                  \(\backslash\)
                                                               \(\backslash\)
            return \hyperlink{error__types_8h_a4db9ee29f2ff83c71567c12f6bfbf28cabbe6797281350f36c23d07d6f2d7f6e2}{ERROR\_INVALID\_PARAM};                        \(\backslash\)
                                                               \(\backslash\)
    \}                                                          \(\backslash\)
\})
\end{DoxyCode}


Checks the flow control setting conformity. 

This macro will return from the function it is used in if an error is detected. An error message will be logged and an invalid parameter error is returned.


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em ctrlflow} & The flow control for the serial line. \\
\hline
\end{DoxyParams}


Definition at line 178 of file bsp\+\_\+usart.\+c.

\mbox{\Hypertarget{bsp__usart_8c_a2c164787cf0d531b3c026aa2b9193a2b}\label{bsp__usart_8c_a2c164787cf0d531b3c026aa2b9193a2b}} 
\index{bsp\+\_\+usart.\+c@{bsp\+\_\+usart.\+c}!C\+H\+E\+C\+K\+\_\+\+P\+A\+R\+I\+T\+Y\+VA@{C\+H\+E\+C\+K\+\_\+\+P\+A\+R\+I\+T\+Y\+VA}}
\index{C\+H\+E\+C\+K\+\_\+\+P\+A\+R\+I\+T\+Y\+VA@{C\+H\+E\+C\+K\+\_\+\+P\+A\+R\+I\+T\+Y\+VA}!bsp\+\_\+usart.\+c@{bsp\+\_\+usart.\+c}}
\subsubsection{\texorpdfstring{C\+H\+E\+C\+K\+\_\+\+P\+A\+R\+I\+T\+Y\+VA}{CHECK\_PARITYVA}}
{\footnotesize\ttfamily \#define C\+H\+E\+C\+K\+\_\+\+P\+A\+R\+I\+T\+Y\+VA(\begin{DoxyParamCaption}\item[{}]{parity }\end{DoxyParamCaption})}

{\bfseries Value\+:}
\begin{DoxyCode}
(\{                                                             \(\backslash\)
    switch(parity)                                             \(\backslash\)
    \{                                                          \(\backslash\)
        case \hyperlink{serial_8h_ad3af92391cfd2670eb782a60c7f923a6}{SERIAL\_PARITY\_NONE}:                               \(\backslash\)
        case \hyperlink{serial_8h_ab1469484b1ad5e39561c21b5a590eaf6}{SERIAL\_PARITY\_EVEN}:                               \(\backslash\)
        case \hyperlink{serial_8h_aa1baeda93fe64b888113824d02471d0f}{SERIAL\_PARITY\_ODD}:                                \(\backslash\)
            break;                                             \(\backslash\)
        default:                                               \(\backslash\)
            if(\hyperlink{config_8h_a6c272d2b12ffba9bdd5a4d5dd608a0f8}{KERNEL\_LOG\_LEVEL} == \hyperlink{config_8h_a023f94f341f2300adee0891b15b364b2}{ERROR\_LOG\_LEVEL})            \(\backslash\)
            \{                                                  \(\backslash\)
                KERNEL\_LOG\_ERROR(\textcolor{stringliteral}{"Invalid USART partity mode"}, \(\backslash\)
                                 (\textcolor{keywordtype}{void}*)(\hyperlink{stdint_8h_a324c5d28c0d82f502a234ab99efac87a}{uint32\_t})parity,      \(\backslash\)
                                 \textcolor{keyword}{sizeof}(parity),               \(\backslash\)
                                 \hyperlink{error__types_8h_a4db9ee29f2ff83c71567c12f6bfbf28cabbe6797281350f36c23d07d6f2d7f6e2}{ERROR\_INVALID\_PARAM});         \(\backslash\)
            \}                                                  \(\backslash\)
                                                               \(\backslash\)
            return \hyperlink{error__types_8h_a4db9ee29f2ff83c71567c12f6bfbf28cabbe6797281350f36c23d07d6f2d7f6e2}{ERROR\_INVALID\_PARAM};                        \(\backslash\)
                                                               \(\backslash\)
    \}                                                          \(\backslash\)
\})
\end{DoxyCode}


Checks the parity setting conformity. 

This macro will return from the function it is used in if an error is detected. An error message will be logged and an invalid parameter error is returned.


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em parity} & The parity settings for the serial line. \\
\hline
\end{DoxyParams}


Definition at line 147 of file bsp\+\_\+usart.\+c.

\mbox{\Hypertarget{bsp__usart_8c_ace359bfb3e864f995667f829a5520105}\label{bsp__usart_8c_ace359bfb3e864f995667f829a5520105}} 
\index{bsp\+\_\+usart.\+c@{bsp\+\_\+usart.\+c}!C\+H\+E\+C\+K\+\_\+\+S\+T\+O\+P\+B\+I\+TS@{C\+H\+E\+C\+K\+\_\+\+S\+T\+O\+P\+B\+I\+TS}}
\index{C\+H\+E\+C\+K\+\_\+\+S\+T\+O\+P\+B\+I\+TS@{C\+H\+E\+C\+K\+\_\+\+S\+T\+O\+P\+B\+I\+TS}!bsp\+\_\+usart.\+c@{bsp\+\_\+usart.\+c}}
\subsubsection{\texorpdfstring{C\+H\+E\+C\+K\+\_\+\+S\+T\+O\+P\+B\+I\+TS}{CHECK\_STOPBITS}}
{\footnotesize\ttfamily \#define C\+H\+E\+C\+K\+\_\+\+S\+T\+O\+P\+B\+I\+TS(\begin{DoxyParamCaption}\item[{}]{stpbits }\end{DoxyParamCaption})}

{\bfseries Value\+:}
\begin{DoxyCode}
(\{                                                             \(\backslash\)
    switch(stpbits)                                            \(\backslash\)
    \{                                                          \(\backslash\)
        case \hyperlink{serial_8h_a53a4c884223db0ce40e97ed0cc5e6d19}{SERIAL\_STOP\_BITS\_05}:                              \(\backslash\)
        case \hyperlink{serial_8h_a2b63bfe663eaa7e96165898d0bad9ba1}{SERIAL\_STOP\_BITS\_1}:                               \(\backslash\)
        case \hyperlink{serial_8h_adfe27b7a5b350830ec68973c5aa7de7a}{SERIAL\_STOP\_BITS\_15}:                              \(\backslash\)
        case \hyperlink{serial_8h_ad91c5a26785732ceabc6feddf28a2695}{SERIAL\_STOP\_BITS\_2}:                               \(\backslash\)
            break;                                             \(\backslash\)
        default:                                               \(\backslash\)
            if(\hyperlink{config_8h_a6c272d2b12ffba9bdd5a4d5dd608a0f8}{KERNEL\_LOG\_LEVEL} == \hyperlink{config_8h_a023f94f341f2300adee0891b15b364b2}{ERROR\_LOG\_LEVEL})            \(\backslash\)
            \{                                                  \(\backslash\)
                KERNEL\_LOG\_ERROR(\textcolor{stringliteral}{"Invalid USART stop bits"},    \(\backslash\)
                                 (\textcolor{keywordtype}{void}*)(\hyperlink{stdint_8h_a324c5d28c0d82f502a234ab99efac87a}{uint32\_t})stpbits,     \(\backslash\)
                                 \textcolor{keyword}{sizeof}(stpbits),              \(\backslash\)
                                 \hyperlink{error__types_8h_a4db9ee29f2ff83c71567c12f6bfbf28cabbe6797281350f36c23d07d6f2d7f6e2}{ERROR\_INVALID\_PARAM});         \(\backslash\)
            \}                                                  \(\backslash\)
                                                               \(\backslash\)
            return \hyperlink{error__types_8h_a4db9ee29f2ff83c71567c12f6bfbf28cabbe6797281350f36c23d07d6f2d7f6e2}{ERROR\_INVALID\_PARAM};                        \(\backslash\)
                                                               \(\backslash\)
    \}                                                          \(\backslash\)
\})
\end{DoxyCode}


Checks the stop bits setting conformity. 

This macro will return from the function it is used in if an error is detected. An error message will be logged and an invalid parameter error is returned.


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em stpbits} & The stop bits settings for the serial line. \\
\hline
\end{DoxyParams}


Definition at line 115 of file bsp\+\_\+usart.\+c.

\mbox{\Hypertarget{bsp__usart_8c_a51885194f22c4bd5f94ab0bb253dd079}\label{bsp__usart_8c_a51885194f22c4bd5f94ab0bb253dd079}} 
\index{bsp\+\_\+usart.\+c@{bsp\+\_\+usart.\+c}!C\+H\+E\+C\+K\+\_\+\+W\+D\+L\+E\+N\+G\+TH@{C\+H\+E\+C\+K\+\_\+\+W\+D\+L\+E\+N\+G\+TH}}
\index{C\+H\+E\+C\+K\+\_\+\+W\+D\+L\+E\+N\+G\+TH@{C\+H\+E\+C\+K\+\_\+\+W\+D\+L\+E\+N\+G\+TH}!bsp\+\_\+usart.\+c@{bsp\+\_\+usart.\+c}}
\subsubsection{\texorpdfstring{C\+H\+E\+C\+K\+\_\+\+W\+D\+L\+E\+N\+G\+TH}{CHECK\_WDLENGTH}}
{\footnotesize\ttfamily \#define C\+H\+E\+C\+K\+\_\+\+W\+D\+L\+E\+N\+G\+TH(\begin{DoxyParamCaption}\item[{}]{wdlength }\end{DoxyParamCaption})}

{\bfseries Value\+:}
\begin{DoxyCode}
(\{                                                             \(\backslash\)
    switch(wdlength)                                           \(\backslash\)
    \{                                                          \(\backslash\)
        case 8:                                                \(\backslash\)
        case 9:                                                \(\backslash\)
            break;                                             \(\backslash\)
        default:                                               \(\backslash\)
            if(\hyperlink{config_8h_a6c272d2b12ffba9bdd5a4d5dd608a0f8}{KERNEL\_LOG\_LEVEL} == \hyperlink{config_8h_a023f94f341f2300adee0891b15b364b2}{ERROR\_LOG\_LEVEL})            \(\backslash\)
            \{                                                  \(\backslash\)
                KERNEL\_LOG\_ERROR(\textcolor{stringliteral}{"Invalid USART word length"},  \(\backslash\)
                                 (\textcolor{keywordtype}{void}*)(\hyperlink{stdint_8h_a324c5d28c0d82f502a234ab99efac87a}{uint32\_t})wdlength,    \(\backslash\)
                                 \textcolor{keyword}{sizeof}(wdlength),             \(\backslash\)
                                 \hyperlink{error__types_8h_a4db9ee29f2ff83c71567c12f6bfbf28cabbe6797281350f36c23d07d6f2d7f6e2}{ERROR\_INVALID\_PARAM});         \(\backslash\)
            \}                                                  \(\backslash\)
                                                               \(\backslash\)
            return \hyperlink{error__types_8h_a4db9ee29f2ff83c71567c12f6bfbf28cabbe6797281350f36c23d07d6f2d7f6e2}{ERROR\_INVALID\_PARAM};                        \(\backslash\)
                                                               \(\backslash\)
    \}                                                          \(\backslash\)
\})
\end{DoxyCode}


Checks the word length setting conformity. 

This macro will return from the function it is used in if an error is detected. An error message will be logged and an invalid parameter error is returned.


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em wdlength} & The word length settings for the serial line. \\
\hline
\end{DoxyParams}


Definition at line 85 of file bsp\+\_\+usart.\+c.

\mbox{\Hypertarget{bsp__usart_8c_a34e3b693f024488a2a09c0b1c0f71f96}\label{bsp__usart_8c_a34e3b693f024488a2a09c0b1c0f71f96}} 
\index{bsp\+\_\+usart.\+c@{bsp\+\_\+usart.\+c}!U\+S\+A\+R\+T\+\_\+\+G\+E\+T\+\_\+\+B\+R\+R\+\_\+\+D\+I\+V\+\_\+\+F\+R\+A\+Q\+\_\+16@{U\+S\+A\+R\+T\+\_\+\+G\+E\+T\+\_\+\+B\+R\+R\+\_\+\+D\+I\+V\+\_\+\+F\+R\+A\+Q\+\_\+16}}
\index{U\+S\+A\+R\+T\+\_\+\+G\+E\+T\+\_\+\+B\+R\+R\+\_\+\+D\+I\+V\+\_\+\+F\+R\+A\+Q\+\_\+16@{U\+S\+A\+R\+T\+\_\+\+G\+E\+T\+\_\+\+B\+R\+R\+\_\+\+D\+I\+V\+\_\+\+F\+R\+A\+Q\+\_\+16}!bsp\+\_\+usart.\+c@{bsp\+\_\+usart.\+c}}
\subsubsection{\texorpdfstring{U\+S\+A\+R\+T\+\_\+\+G\+E\+T\+\_\+\+B\+R\+R\+\_\+\+D\+I\+V\+\_\+\+F\+R\+A\+Q\+\_\+16}{USART\_GET\_BRR\_DIV\_FRAQ\_16}}
{\footnotesize\ttfamily \#define U\+S\+A\+R\+T\+\_\+\+G\+E\+T\+\_\+\+B\+R\+R\+\_\+\+D\+I\+V\+\_\+\+F\+R\+A\+Q\+\_\+16(\begin{DoxyParamCaption}\item[{}]{f,  }\item[{}]{b }\end{DoxyParamCaption})}

{\bfseries Value\+:}
\begin{DoxyCode}
(((((\hyperlink{stdint_8h_aaa5d1cd013383c889537491c3cfd9aad}{uint64\_t})f * 100 / ((\hyperlink{stdint_8h_aaa5d1cd013383c889537491c3cfd9aad}{uint64\_t})16 * (\hyperlink{stdint_8h_aaa5d1cd013383c889537491c3cfd9aad}{uint64\_t})b)) -   \(\backslash\)
        (\hyperlink{bsp__usart_8c_a3fb76e1ecccca1505a00f7cbf6cbe2d2}{USART\_GET\_BRR\_DIV\_MANT\_16}(f, b) * 100)) * 16 + 50) / 100)
\end{DoxyCode}


Compute the B\+RR bivider fraction for a 16 bit oversampling. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em f} & The serial input clock frequency. \\
\hline
\mbox{\tt in}  & {\em b} & The required baudrate for the serial line.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The B\+RR fraction is returned. 
\end{DoxyReturn}


Definition at line 220 of file bsp\+\_\+usart.\+c.

\mbox{\Hypertarget{bsp__usart_8c_a3fb76e1ecccca1505a00f7cbf6cbe2d2}\label{bsp__usart_8c_a3fb76e1ecccca1505a00f7cbf6cbe2d2}} 
\index{bsp\+\_\+usart.\+c@{bsp\+\_\+usart.\+c}!U\+S\+A\+R\+T\+\_\+\+G\+E\+T\+\_\+\+B\+R\+R\+\_\+\+D\+I\+V\+\_\+\+M\+A\+N\+T\+\_\+16@{U\+S\+A\+R\+T\+\_\+\+G\+E\+T\+\_\+\+B\+R\+R\+\_\+\+D\+I\+V\+\_\+\+M\+A\+N\+T\+\_\+16}}
\index{U\+S\+A\+R\+T\+\_\+\+G\+E\+T\+\_\+\+B\+R\+R\+\_\+\+D\+I\+V\+\_\+\+M\+A\+N\+T\+\_\+16@{U\+S\+A\+R\+T\+\_\+\+G\+E\+T\+\_\+\+B\+R\+R\+\_\+\+D\+I\+V\+\_\+\+M\+A\+N\+T\+\_\+16}!bsp\+\_\+usart.\+c@{bsp\+\_\+usart.\+c}}
\subsubsection{\texorpdfstring{U\+S\+A\+R\+T\+\_\+\+G\+E\+T\+\_\+\+B\+R\+R\+\_\+\+D\+I\+V\+\_\+\+M\+A\+N\+T\+\_\+16}{USART\_GET\_BRR\_DIV\_MANT\_16}}
{\footnotesize\ttfamily \#define U\+S\+A\+R\+T\+\_\+\+G\+E\+T\+\_\+\+B\+R\+R\+\_\+\+D\+I\+V\+\_\+\+M\+A\+N\+T\+\_\+16(\begin{DoxyParamCaption}\item[{}]{f,  }\item[{}]{b }\end{DoxyParamCaption})~((\hyperlink{stdint_8h_aaa5d1cd013383c889537491c3cfd9aad}{uint64\+\_\+t})f / ((\hyperlink{stdint_8h_aaa5d1cd013383c889537491c3cfd9aad}{uint64\+\_\+t})16 $\ast$ (\hyperlink{stdint_8h_aaa5d1cd013383c889537491c3cfd9aad}{uint64\+\_\+t})b))}



Compute the B\+RR bivider mantissa for a 16 bit oversampling. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em f} & The serial input clock frequency. \\
\hline
\mbox{\tt in}  & {\em b} & The required baudrate for the serial line.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The B\+RR mantissa is returned. 
\end{DoxyReturn}


Definition at line 209 of file bsp\+\_\+usart.\+c.



\subsection{Function Documentation}
\mbox{\Hypertarget{bsp__usart_8c_a39d14fff7f007d639de7a6db12fd8acf}\label{bsp__usart_8c_a39d14fff7f007d639de7a6db12fd8acf}} 
\index{bsp\+\_\+usart.\+c@{bsp\+\_\+usart.\+c}!bsp\+\_\+uart\+\_\+init@{bsp\+\_\+uart\+\_\+init}}
\index{bsp\+\_\+uart\+\_\+init@{bsp\+\_\+uart\+\_\+init}!bsp\+\_\+usart.\+c@{bsp\+\_\+usart.\+c}}
\subsubsection{\texorpdfstring{bsp\+\_\+uart\+\_\+init()}{bsp\_uart\_init()}}
{\footnotesize\ttfamily void bsp\+\_\+uart\+\_\+init (\begin{DoxyParamCaption}\item[{const \hyperlink{bsp__usart_8h_a594f9d90a9a3875660da4512fb208cf9}{U\+S\+A\+R\+T\+\_\+\+I\+D\+E\+N\+T\+I\+F\+I\+E\+R\+\_\+E}}]{usart\+\_\+id,  }\item[{const \hyperlink{serial_8h_acf007a933480ae3b580e6bccdc4b7c40}{S\+E\+R\+I\+A\+L\+\_\+\+S\+E\+T\+T\+I\+N\+G\+S\+\_\+T} $\ast$}]{settings }\end{DoxyParamCaption})}



Initializes the U\+S\+A\+RT as U\+A\+RT. 

Initializes the U\+S\+A\+RT as U\+A\+RT with the corresponding settings given as parameter.


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em usart\+\_\+id} & The identifier of the U\+S\+A\+RT to initialize. \\
\hline
\mbox{\tt in}  & {\em settings} & The settings structure to use to initialize the U\+A\+RT. \\
\hline
\end{DoxyParams}


Definition at line 233 of file bsp\+\_\+usart.\+c.


\begin{DoxyCode}
235 \{
236     \textcolor{keyword}{volatile} \hyperlink{stdint_8h_a324c5d28c0d82f502a234ab99efac87a}{uint32\_t}* cr1;
237     \textcolor{keyword}{volatile} \hyperlink{stdint_8h_a324c5d28c0d82f502a234ab99efac87a}{uint32\_t}* cr2;
238     \textcolor{keyword}{volatile} \hyperlink{stdint_8h_a324c5d28c0d82f502a234ab99efac87a}{uint32\_t}* cr3;
239     \textcolor{keyword}{volatile} \hyperlink{stdint_8h_a324c5d28c0d82f502a234ab99efac87a}{uint32\_t}* brr;
240 
241     \hyperlink{stdint_8h_a324c5d28c0d82f502a234ab99efac87a}{uint32\_t} freq;
242 
243     \textcolor{keywordflow}{switch}(usart\_id)
244     \{
245         \textcolor{keywordflow}{case} \hyperlink{bsp__usart_8h_a58f9be3820e29e0fbf00e2466c3ee768a512d550c862eac9ad45d923508bb0f7d}{USART\_ID\_1}:
246             cr1 = (\textcolor{keyword}{volatile} \hyperlink{stdint_8h_a324c5d28c0d82f502a234ab99efac87a}{uint32\_t}*)\hyperlink{bsp__usart_8h_a7e3cbb9c3b7b3967719512ff9df7d632}{USART1\_CR1\_ADDRESS};
247             cr2 = (\textcolor{keyword}{volatile} \hyperlink{stdint_8h_a324c5d28c0d82f502a234ab99efac87a}{uint32\_t}*)\hyperlink{bsp__usart_8h_a5130cce25ab86fc32b7846b2dcbc9abf}{USART1\_CR2\_ADDRESS};
248             cr3 = (\textcolor{keyword}{volatile} \hyperlink{stdint_8h_a324c5d28c0d82f502a234ab99efac87a}{uint32\_t}*)\hyperlink{bsp__usart_8h_a04b5bd4552470522cddb75322bb9e4a1}{USART1\_CR3\_ADDRESS};
249             brr = (\textcolor{keyword}{volatile} \hyperlink{stdint_8h_a324c5d28c0d82f502a234ab99efac87a}{uint32\_t}*)\hyperlink{bsp__usart_8h_abcaf3524a9622c5cec6d5d70027c5d15}{USART1\_BRR\_ADDRESS};
250             \textcolor{keywordflow}{break};
251         \textcolor{keywordflow}{case} \hyperlink{bsp__usart_8h_a58f9be3820e29e0fbf00e2466c3ee768abb138542d801249fd01ec62c34f52cff}{USART\_ID\_2}:
252             cr1 = (\textcolor{keyword}{volatile} \hyperlink{stdint_8h_a324c5d28c0d82f502a234ab99efac87a}{uint32\_t}*)\hyperlink{bsp__usart_8h_a551a35cf294b360d96b14bac0aa81c28}{USART2\_CR1\_ADDRESS};
253             cr2 = (\textcolor{keyword}{volatile} \hyperlink{stdint_8h_a324c5d28c0d82f502a234ab99efac87a}{uint32\_t}*)\hyperlink{bsp__usart_8h_aa130d46de6c5714614654179f9b690ca}{USART2\_CR2\_ADDRESS};
254             cr3 = (\textcolor{keyword}{volatile} \hyperlink{stdint_8h_a324c5d28c0d82f502a234ab99efac87a}{uint32\_t}*)\hyperlink{bsp__usart_8h_a4aceb0927ac1c8ec7adad8e44a0d626a}{USART2\_CR3\_ADDRESS};
255             brr = (\textcolor{keyword}{volatile} \hyperlink{stdint_8h_a324c5d28c0d82f502a234ab99efac87a}{uint32\_t}*)\hyperlink{bsp__usart_8h_a02ff054c09f139a38369680f85c1b9e4}{USART2\_BRR\_ADDRESS};
256             \textcolor{keywordflow}{break};
257         \textcolor{keywordflow}{case} \hyperlink{bsp__usart_8h_a58f9be3820e29e0fbf00e2466c3ee768afd45e5de3678cbcada70f46bde327479}{USART\_ID\_6}:
258             cr1 = (\textcolor{keyword}{volatile} \hyperlink{stdint_8h_a324c5d28c0d82f502a234ab99efac87a}{uint32\_t}*)\hyperlink{bsp__usart_8h_a52e23572285d44dea63aff07039d248e}{USART6\_CR1\_ADDRESS};
259             cr2 = (\textcolor{keyword}{volatile} \hyperlink{stdint_8h_a324c5d28c0d82f502a234ab99efac87a}{uint32\_t}*)\hyperlink{bsp__usart_8h_a94170d0ce631976cd1daefcb320a1815}{USART6\_CR2\_ADDRESS};
260             cr3 = (\textcolor{keyword}{volatile} \hyperlink{stdint_8h_a324c5d28c0d82f502a234ab99efac87a}{uint32\_t}*)\hyperlink{bsp__usart_8h_aa5de805e5b75dd00bb77531e7273ad14}{USART6\_CR3\_ADDRESS};
261             brr = (\textcolor{keyword}{volatile} \hyperlink{stdint_8h_a324c5d28c0d82f502a234ab99efac87a}{uint32\_t}*)\hyperlink{bsp__usart_8h_a8089788317790f6633511039cb7d50b8}{USART6\_BRR\_ADDRESS};
262             \textcolor{keywordflow}{break};
263         \textcolor{keywordflow}{default}:
264             \textcolor{keywordflow}{return};
265     \}
266 
267     \textcolor{comment}{/* Set CR1 register */}
268     *cr1 = *cr1 & ~(\hyperlink{bsp__usart_8h_aed6caeb0cb48f1a7b34090f31a92a8e2}{USART\_CR1\_OVER8}  | \hyperlink{bsp__usart_8h_a95f0288b9c6aaeca7cb6550a2e6833e2}{USART\_CR1\_M}      | 
269                     \hyperlink{bsp__usart_8h_ad831dfc169fcf14b7284984dbecf322d}{USART\_CR1\_WAKE}   | \hyperlink{bsp__usart_8h_a60f8fcf084f9a8514efafb617c70b074}{USART\_CR1\_PCE}    |
270                     \hyperlink{bsp__usart_8h_a2e159d36ab2c93a2c1942df60e9eebbe}{USART\_CR1\_PS}     | \hyperlink{bsp__usart_8h_a27405d413b6d355ccdb076d52fef6875}{USART\_CR1\_PEIE}   | 
271                     \hyperlink{bsp__usart_8h_a70422871d15f974b464365e7fe1877e9}{USART\_CR1\_TXEIE}  | \hyperlink{bsp__usart_8h_aa17130690a1ca95b972429eb64d4254e}{USART\_CR1\_TCIE}   | 
272                     \hyperlink{bsp__usart_8h_a91118f867adfdb2e805beea86666de04}{USART\_CR1\_RXNEIE} | \hyperlink{bsp__usart_8h_a5221d09eebd12445a20f221bf98066f8}{USART\_CR1\_IDLEIE} | 
273                     \hyperlink{bsp__usart_8h_ade7f090b04fd78b755b43357ecaa9622}{USART\_CR1\_TE}     | \hyperlink{bsp__usart_8h_ada0d5d407a22264de847bc1b40a17aeb}{USART\_CR1\_RE}     |
274                     \hyperlink{bsp__usart_8h_aa7d61ab5a4e2beaa3f591c56bd15a27b}{USART\_CR1\_RWU}    | \hyperlink{bsp__usart_8h_ac457c519baa28359ab7959fbe0c5cda1}{USART\_CR1\_SBK});
275 
276     *cr1 = *cr1 | 
277            (settings->\hyperlink{struct_s_e_r_i_a_l___s_e_t_t_i_n_g_s_ae9ff0fba282a81e6b05a1082ab54e14d}{word\_length} == 8 ? 0 : \hyperlink{bsp__usart_8h_a95f0288b9c6aaeca7cb6550a2e6833e2}{USART\_CR1\_M}) |
278            ((settings->\hyperlink{struct_s_e_r_i_a_l___s_e_t_t_i_n_g_s_a57fc780fe7a58343cb0513fd873e95fb}{partity} == \hyperlink{serial_8h_ab1469484b1ad5e39561c21b5a590eaf6}{SERIAL\_PARITY\_EVEN}) || 
279             (settings->\hyperlink{struct_s_e_r_i_a_l___s_e_t_t_i_n_g_s_a57fc780fe7a58343cb0513fd873e95fb}{partity} == \hyperlink{serial_8h_ad3af92391cfd2670eb782a60c7f923a6}{SERIAL\_PARITY\_NONE}) ? 0 : 
      \hyperlink{bsp__usart_8h_a2e159d36ab2c93a2c1942df60e9eebbe}{USART\_CR1\_PS}) |
280            (settings->\hyperlink{struct_s_e_r_i_a_l___s_e_t_t_i_n_g_s_a57fc780fe7a58343cb0513fd873e95fb}{partity} == \hyperlink{serial_8h_ad3af92391cfd2670eb782a60c7f923a6}{SERIAL\_PARITY\_NONE}   ? 0 : 
      \hyperlink{bsp__usart_8h_a60f8fcf084f9a8514efafb617c70b074}{USART\_CR1\_PCE}) |
281            \hyperlink{bsp__usart_8h_ade7f090b04fd78b755b43357ecaa9622}{USART\_CR1\_TE} | \hyperlink{bsp__usart_8h_ada0d5d407a22264de847bc1b40a17aeb}{USART\_CR1\_RE};
282 
283     \textcolor{comment}{/* Set CR2 register */}
284     *cr2 = *cr2 & ~(\hyperlink{bsp__usart_8h_ac8931efa62c29d92f5c0ec5a05f907ef}{USART\_CR2\_LINEN}     | \hyperlink{bsp__usart_8h_ae20ff98868e1e2fec55f2141b5a353bd}{USART\_CR2\_STOP\_MASK} | 
285                     \hyperlink{bsp__usart_8h_a42a396cde02ffa0c4d3fd9817b6af853}{USART\_CR2\_CLKEN}     | \hyperlink{bsp__usart_8h_afbb4336ac93d94d4e78f9fb7b3a0dc68}{USART\_CR2\_CPOL}      |
286                     \hyperlink{bsp__usart_8h_a362976ce813e58310399d113d2cf09cb}{USART\_CR2\_CPHA}      | \hyperlink{bsp__usart_8h_a4a62e93ae7864e89622bdd92508b615e}{USART\_CR2\_LBCL}      | 
287                     \hyperlink{bsp__usart_8h_af98769bed28dfd2b222e6884e464f9d2}{USART\_CR2\_LBIE}      | \hyperlink{bsp__usart_8h_a539ea2e20b534b2c742e3194f2ad5a5c}{USART\_CR2\_LBL}       | 
288                     \hyperlink{bsp__usart_8h_a8abd4cdca00f61296bc3a84a59992dd3}{USART\_CR2\_ADDR\_MASK});
289 
290     \textcolor{keywordflow}{switch}(settings->\hyperlink{struct_s_e_r_i_a_l___s_e_t_t_i_n_g_s_ae847d8b7e1095e0ae8d6eb1e4a281585}{stop\_bits})
291     \{
292         \textcolor{keywordflow}{case} \hyperlink{serial_8h_a53a4c884223db0ce40e97ed0cc5e6d19}{SERIAL\_STOP\_BITS\_05}:
293             *cr2 = *cr2 | \hyperlink{bsp__usart_8h_a41e7bdb66e99fb64359cd105d624d41c}{USART\_CR2\_STOP\_05};
294             \textcolor{keywordflow}{break};
295         \textcolor{keywordflow}{case} \hyperlink{serial_8h_adfe27b7a5b350830ec68973c5aa7de7a}{SERIAL\_STOP\_BITS\_15}:
296             *cr2 = *cr2 | \hyperlink{bsp__usart_8h_a57f01ae62391c4e1f82e899d8f765858}{USART\_CR2\_STOP\_15};
297             \textcolor{keywordflow}{break};
298         \textcolor{keywordflow}{case} \hyperlink{serial_8h_ad91c5a26785732ceabc6feddf28a2695}{SERIAL\_STOP\_BITS\_2}:
299             *cr2 = *cr2 | \hyperlink{bsp__usart_8h_a1792b89d6790744140059546bad805e9}{USART\_CR2\_STOP\_2};
300             \textcolor{keywordflow}{break};
301         \textcolor{keywordflow}{case} \hyperlink{serial_8h_a2b63bfe663eaa7e96165898d0bad9ba1}{SERIAL\_STOP\_BITS\_1}:
302         \textcolor{keywordflow}{default}:
303             \textcolor{keywordflow}{break};
304     \}
305 
306     \textcolor{comment}{/* Set CR3 register */}
307     *cr3 = *cr3 & ~(\hyperlink{bsp__usart_8h_a9a96fb1a7beab602cbc8cb0393593826}{USART\_CR3\_ONEBIT} | \hyperlink{bsp__usart_8h_a636d5ec2e9556949fc68d13ad45a1e90}{USART\_CR3\_CTSIE} | 
308                     \hyperlink{bsp__usart_8h_aa125f026b1ca2d76eab48b191baed265}{USART\_CR3\_CTSE}   | \hyperlink{bsp__usart_8h_a7c5d6fcd84a4728cda578a0339b4cac2}{USART\_CR3\_RTSE}  |
309                     \hyperlink{bsp__usart_8h_a5bb515d3814d448f84e2c98bf44f3993}{USART\_CR3\_DMAT}   | \hyperlink{bsp__usart_8h_aff130f15493c765353ec2fd605667c5a}{USART\_CR3\_DMAR}  | 
310                     \hyperlink{bsp__usart_8h_a9180b9249a26988f71d4bb2b0c3eec27}{USART\_CR3\_SCEN}   | \hyperlink{bsp__usart_8h_a3f3b70b2ee9ff0b59e952fd7ab04373c}{USART\_CR3\_NACK}  | 
311                     \hyperlink{bsp__usart_8h_ac71129810fab0b46d91161a39e3f8d01}{USART\_CR3\_HDSEL}  | \hyperlink{bsp__usart_8h_a22af8d399f1adda62e31186f0309af80}{USART\_CR3\_IRLP}  |
312                     \hyperlink{bsp__usart_8h_a31c66373bfbae7724c836ac63b8411dd}{USART\_CR3\_IREN}   | \hyperlink{bsp__usart_8h_aaed1a39c551b1641128f81893ff558d0}{USART\_CR3\_EIE});
313 
314     \textcolor{keywordflow}{switch}(settings->\hyperlink{struct_s_e_r_i_a_l___s_e_t_t_i_n_g_s_a6f2a9d6a71d9ca705cf561f08e4e222c}{ctrl\_flow})
315     \{
316         \textcolor{keywordflow}{case} \hyperlink{serial_8h_a0d44b3d3d3e5bb25dc7b976dc2acd4d6}{SERIAL\_CTRL\_FLOW\_CTS}:
317             *cr3 = *cr3 | \hyperlink{bsp__usart_8h_aa125f026b1ca2d76eab48b191baed265}{USART\_CR3\_CTSE};
318             \textcolor{keywordflow}{break};
319         \textcolor{keywordflow}{case} \hyperlink{serial_8h_a2335857b5c95b76430e052c05f6e71b5}{SERIAL\_CTRL\_FLOW\_RTS}:
320             *cr3 = *cr3 | \hyperlink{bsp__usart_8h_a7c5d6fcd84a4728cda578a0339b4cac2}{USART\_CR3\_RTSE};
321             \textcolor{keywordflow}{break};
322         \textcolor{keywordflow}{case} \hyperlink{serial_8h_a5eadb2a7b63f2b5483b5c4aed197d99a}{SERIAL\_CTRL\_FLOW\_CTS\_RTS}:
323             *cr3 = *cr3 | \hyperlink{bsp__usart_8h_aa125f026b1ca2d76eab48b191baed265}{USART\_CR3\_CTSE} | \hyperlink{bsp__usart_8h_a7c5d6fcd84a4728cda578a0339b4cac2}{USART\_CR3\_RTSE};
324             \textcolor{keywordflow}{break};
325         \textcolor{keywordflow}{case} \hyperlink{serial_8h_a2b63bfe663eaa7e96165898d0bad9ba1}{SERIAL\_STOP\_BITS\_1}:
326         \textcolor{keywordflow}{default}:
327             \textcolor{keywordflow}{break};
328     \}
329 
330 
331     \textcolor{comment}{/* Set BRR register */}
332     \textcolor{keywordflow}{if}(usart\_id == \hyperlink{bsp__usart_8h_a58f9be3820e29e0fbf00e2466c3ee768a512d550c862eac9ad45d923508bb0f7d}{USART\_ID\_1} || usart\_id == \hyperlink{bsp__usart_8h_a58f9be3820e29e0fbf00e2466c3ee768afd45e5de3678cbcada70f46bde327479}{USART\_ID\_6})
333     \{
334         freq = \hyperlink{bsp__clocks_8h_aeeded4b587684fa3383b3d42ee29af1e}{bsp\_clocks\_get\_freq}(\hyperlink{bsp__clocks_8h_ad0e92b49c1a7205e3460ca1e54fa9d70aad62d8c78d2b4617724a82ec190a33ee}{BSP\_CLOCK\_ID\_PCLK2});
335     \}
336     \textcolor{keywordflow}{else} 
337     \{
338         freq = \hyperlink{bsp__clocks_8h_aeeded4b587684fa3383b3d42ee29af1e}{bsp\_clocks\_get\_freq}(\hyperlink{bsp__clocks_8h_ad0e92b49c1a7205e3460ca1e54fa9d70a0493d0bbd7edf1aebadb342c5c38f709}{BSP\_CLOCK\_ID\_PCLK1});
339     \}
340 
341     \hyperlink{stdint_8h_a324c5d28c0d82f502a234ab99efac87a}{uint32\_t} mantissa = \hyperlink{bsp__usart_8c_a3fb76e1ecccca1505a00f7cbf6cbe2d2}{USART\_GET\_BRR\_DIV\_MANT\_16}(freq, settings->
      \hyperlink{struct_s_e_r_i_a_l___s_e_t_t_i_n_g_s_ac4f06ea26ed6bd7ae83b92d64ac10b78}{baudrate});
342     \hyperlink{stdint_8h_a324c5d28c0d82f502a234ab99efac87a}{uint32\_t} fraq = \hyperlink{bsp__usart_8c_a34e3b693f024488a2a09c0b1c0f71f96}{USART\_GET\_BRR\_DIV\_FRAQ\_16}(freq, settings->
      \hyperlink{struct_s_e_r_i_a_l___s_e_t_t_i_n_g_s_ac4f06ea26ed6bd7ae83b92d64ac10b78}{baudrate});
343 
344     (void)fraq;
345     (void)mantissa;
346 
347     *brr = (\hyperlink{bsp__usart_8c_a3fb76e1ecccca1505a00f7cbf6cbe2d2}{USART\_GET\_BRR\_DIV\_MANT\_16}(freq, settings->
      \hyperlink{struct_s_e_r_i_a_l___s_e_t_t_i_n_g_s_ac4f06ea26ed6bd7ae83b92d64ac10b78}{baudrate}) << 
348             \hyperlink{bsp__usart_8h_a9c527a46a70f29b45da0d016dd07a3e8}{USART\_BRR\_DIV\_MANT\_OFFSET}) |
349             \hyperlink{bsp__usart_8c_a34e3b693f024488a2a09c0b1c0f71f96}{USART\_GET\_BRR\_DIV\_FRAQ\_16}(freq, settings->
      \hyperlink{struct_s_e_r_i_a_l___s_e_t_t_i_n_g_s_ac4f06ea26ed6bd7ae83b92d64ac10b78}{baudrate});
350 \}
\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{bsp__usart_8c_a39d14fff7f007d639de7a6db12fd8acf_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{bsp__usart_8c_a39d14fff7f007d639de7a6db12fd8acf_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{bsp__usart_8c_a81aa58ca3b3ff2a16c5666f1601dedc7}\label{bsp__usart_8c_a81aa58ca3b3ff2a16c5666f1601dedc7}} 
\index{bsp\+\_\+usart.\+c@{bsp\+\_\+usart.\+c}!bsp\+\_\+usart\+\_\+disable@{bsp\+\_\+usart\+\_\+disable}}
\index{bsp\+\_\+usart\+\_\+disable@{bsp\+\_\+usart\+\_\+disable}!bsp\+\_\+usart.\+c@{bsp\+\_\+usart.\+c}}
\subsubsection{\texorpdfstring{bsp\+\_\+usart\+\_\+disable()}{bsp\_usart\_disable()}}
{\footnotesize\ttfamily void bsp\+\_\+usart\+\_\+disable (\begin{DoxyParamCaption}\item[{const \hyperlink{bsp__usart_8h_a594f9d90a9a3875660da4512fb208cf9}{U\+S\+A\+R\+T\+\_\+\+I\+D\+E\+N\+T\+I\+F\+I\+E\+R\+\_\+E}}]{usart\+\_\+id }\end{DoxyParamCaption})}



Disables the U\+S\+A\+RT. 

Disables the U\+S\+A\+RT refered by the U\+S\+A\+RT identifier given as parameter.


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em usart\+\_\+id} & The identifier of the U\+S\+A\+RT to disable. \\
\hline
\end{DoxyParams}


Definition at line 359 of file bsp\+\_\+usart.\+c.


\begin{DoxyCode}
360 \{
361     \textcolor{keywordflow}{switch}(usart\_id)
362     \{
363         \textcolor{keywordflow}{case} \hyperlink{bsp__usart_8h_a58f9be3820e29e0fbf00e2466c3ee768a512d550c862eac9ad45d923508bb0f7d}{USART\_ID\_1}:
364             *\hyperlink{bsp__usart_8h_a88337dffb1ca6564662b6965a5b4c3f6}{USART1\_CR1\_REGISTER} = *\hyperlink{bsp__usart_8h_a88337dffb1ca6564662b6965a5b4c3f6}{USART1\_CR1\_REGISTER} & ~
      \hyperlink{bsp__usart_8h_a2bb650676aaae4a5203f372d497d5947}{USART\_CR1\_UE};
365             \textcolor{keywordflow}{break};
366         \textcolor{keywordflow}{case} \hyperlink{bsp__usart_8h_a58f9be3820e29e0fbf00e2466c3ee768abb138542d801249fd01ec62c34f52cff}{USART\_ID\_2}:
367             *\hyperlink{bsp__usart_8h_aa2ab178d47851e6114531471bc8831bd}{USART2\_CR1\_REGISTER} = *\hyperlink{bsp__usart_8h_aa2ab178d47851e6114531471bc8831bd}{USART2\_CR1\_REGISTER} & ~
      \hyperlink{bsp__usart_8h_a2bb650676aaae4a5203f372d497d5947}{USART\_CR1\_UE};
368             \textcolor{keywordflow}{break};
369         \textcolor{keywordflow}{case} \hyperlink{bsp__usart_8h_a58f9be3820e29e0fbf00e2466c3ee768afd45e5de3678cbcada70f46bde327479}{USART\_ID\_6}:
370             *\hyperlink{bsp__usart_8h_a8ef2bb343a29f32b70ff7cb3a04f4199}{USART6\_CR1\_REGISTER} = *\hyperlink{bsp__usart_8h_a8ef2bb343a29f32b70ff7cb3a04f4199}{USART6\_CR1\_REGISTER} & ~
      \hyperlink{bsp__usart_8h_a2bb650676aaae4a5203f372d497d5947}{USART\_CR1\_UE};
371             \textcolor{keywordflow}{break};
372         \textcolor{keywordflow}{default}:
373             \textcolor{keywordflow}{return};
374     \}
375 \}
\end{DoxyCode}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{bsp__usart_8c_a81aa58ca3b3ff2a16c5666f1601dedc7_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{bsp__usart_8c_ae71596fd1683989728deee59105b9b06}\label{bsp__usart_8c_ae71596fd1683989728deee59105b9b06}} 
\index{bsp\+\_\+usart.\+c@{bsp\+\_\+usart.\+c}!bsp\+\_\+usart\+\_\+enable@{bsp\+\_\+usart\+\_\+enable}}
\index{bsp\+\_\+usart\+\_\+enable@{bsp\+\_\+usart\+\_\+enable}!bsp\+\_\+usart.\+c@{bsp\+\_\+usart.\+c}}
\subsubsection{\texorpdfstring{bsp\+\_\+usart\+\_\+enable()}{bsp\_usart\_enable()}}
{\footnotesize\ttfamily void bsp\+\_\+usart\+\_\+enable (\begin{DoxyParamCaption}\item[{const \hyperlink{bsp__usart_8h_a594f9d90a9a3875660da4512fb208cf9}{U\+S\+A\+R\+T\+\_\+\+I\+D\+E\+N\+T\+I\+F\+I\+E\+R\+\_\+E}}]{usart\+\_\+id }\end{DoxyParamCaption})}



Enables the U\+S\+A\+RT. 

Enables the U\+S\+A\+RT refered by the U\+S\+A\+RT identifier given as parameter.


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em usart\+\_\+id} & The identifier of the U\+S\+A\+RT to enable. \\
\hline
\end{DoxyParams}


Definition at line 384 of file bsp\+\_\+usart.\+c.


\begin{DoxyCode}
385 \{
386     \textcolor{keywordflow}{switch}(usart\_id)
387     \{
388         \textcolor{keywordflow}{case} \hyperlink{bsp__usart_8h_a58f9be3820e29e0fbf00e2466c3ee768a512d550c862eac9ad45d923508bb0f7d}{USART\_ID\_1}:
389             *\hyperlink{bsp__usart_8h_a88337dffb1ca6564662b6965a5b4c3f6}{USART1\_CR1\_REGISTER} = *\hyperlink{bsp__usart_8h_a88337dffb1ca6564662b6965a5b4c3f6}{USART1\_CR1\_REGISTER} | 
      \hyperlink{bsp__usart_8h_a2bb650676aaae4a5203f372d497d5947}{USART\_CR1\_UE};
390             \textcolor{keywordflow}{break};
391         \textcolor{keywordflow}{case} \hyperlink{bsp__usart_8h_a58f9be3820e29e0fbf00e2466c3ee768abb138542d801249fd01ec62c34f52cff}{USART\_ID\_2}:
392             *\hyperlink{bsp__usart_8h_aa2ab178d47851e6114531471bc8831bd}{USART2\_CR1\_REGISTER} = *\hyperlink{bsp__usart_8h_aa2ab178d47851e6114531471bc8831bd}{USART2\_CR1\_REGISTER} | 
      \hyperlink{bsp__usart_8h_a2bb650676aaae4a5203f372d497d5947}{USART\_CR1\_UE};
393             \textcolor{keywordflow}{break};
394         \textcolor{keywordflow}{case} \hyperlink{bsp__usart_8h_a58f9be3820e29e0fbf00e2466c3ee768afd45e5de3678cbcada70f46bde327479}{USART\_ID\_6}:
395             *\hyperlink{bsp__usart_8h_a8ef2bb343a29f32b70ff7cb3a04f4199}{USART6\_CR1\_REGISTER} = *\hyperlink{bsp__usart_8h_a8ef2bb343a29f32b70ff7cb3a04f4199}{USART6\_CR1\_REGISTER} | 
      \hyperlink{bsp__usart_8h_a2bb650676aaae4a5203f372d497d5947}{USART\_CR1\_UE};
396             \textcolor{keywordflow}{break};
397         \textcolor{keywordflow}{default}:
398             \textcolor{keywordflow}{return};
399     \}
400 \}
\end{DoxyCode}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{bsp__usart_8c_ae71596fd1683989728deee59105b9b06_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{bsp__usart_8c_ac8063a6773891c77be25ad972f915f35}\label{bsp__usart_8c_ac8063a6773891c77be25ad972f915f35}} 
\index{bsp\+\_\+usart.\+c@{bsp\+\_\+usart.\+c}!serial\+\_\+init@{serial\+\_\+init}}
\index{serial\+\_\+init@{serial\+\_\+init}!bsp\+\_\+usart.\+c@{bsp\+\_\+usart.\+c}}
\subsubsection{\texorpdfstring{serial\+\_\+init()}{serial\_init()}}
{\footnotesize\ttfamily \hyperlink{error__types_8h_acf146bc98f60f47c79d782f7523e339c}{E\+R\+R\+O\+R\+\_\+\+C\+O\+D\+E\+\_\+E} serial\+\_\+init (\begin{DoxyParamCaption}\item[{const \hyperlink{serial_8h_acf007a933480ae3b580e6bccdc4b7c40}{S\+E\+R\+I\+A\+L\+\_\+\+S\+E\+T\+T\+I\+N\+G\+S\+\_\+T} $\ast$}]{settings }\end{DoxyParamCaption})}



Initializes the serial line. 

Initializes the system\textquotesingle{}s serial line. The settings structure is used to set the line\textquotesingle{}s parameter according to th user\textquotesingle{}s choice.


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em settings} & The settings structure used to initialize the serial line.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
N\+O\+\_\+\+E\+R\+R\+OR is returned in case of success. Otherwise an error code is returned. Please refer to the list of the standard error codes. 
\end{DoxyReturn}
This function uses U\+S\+A\+R\+T2 as main U\+A\+RT output.

Definition at line 406 of file bsp\+\_\+usart.\+c.


\begin{DoxyCode}
407 \{
411 
412     \hyperlink{struct_g_p_i_o___s_e_t_t_i_n_g_s}{GPIO\_SETTINGS\_T} gpio\_settings;
413     \hyperlink{error__types_8h_acf146bc98f60f47c79d782f7523e339c}{ERROR\_CODE\_E}    error;
414 
415     \textcolor{keywordflow}{if}(\hyperlink{bsp__usart_8c_ad317e99f056e9ce535815fcdd1697c93}{usart\_init\_state} != 0)
416     \{
417 \textcolor{preprocessor}{#if KERNEL\_LOG\_LEVEL == ERROR\_LOG\_LEVEL}
418         \hyperlink{logger_8h_a580bb63c1418b2fc8456f9b6c5b6d39d}{KERNEL\_LOG\_ERROR}(\textcolor{stringliteral}{"Serial already initialized"}, 
419                          \hyperlink{error__types_8h_a4db9ee29f2ff83c71567c12f6bfbf28ca9af911a6ba1c32ce22213d689cb59f86}{ERROR\_ALREADY\_INIT}, 
420                          \textcolor{keyword}{sizeof}(\hyperlink{error__types_8h_a4db9ee29f2ff83c71567c12f6bfbf28ca9af911a6ba1c32ce22213d689cb59f86}{ERROR\_ALREADY\_INIT}), 
421                          \hyperlink{error__types_8h_a4db9ee29f2ff83c71567c12f6bfbf28ca9af911a6ba1c32ce22213d689cb59f86}{ERROR\_ALREADY\_INIT});
422 \textcolor{preprocessor}{#endif        }
423         \textcolor{keywordflow}{return} \hyperlink{error__types_8h_a4db9ee29f2ff83c71567c12f6bfbf28ca9af911a6ba1c32ce22213d689cb59f86}{ERROR\_ALREADY\_INIT};
424     \}
425 
426     \textcolor{comment}{/* Check parameters */}
427     \textcolor{keywordflow}{if}(settings == \hyperlink{stddef_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL})
428     \{
429 \textcolor{preprocessor}{#if KERNEL\_LOG\_LEVEL == ERROR\_LOG\_LEVEL}
430         \hyperlink{logger_8h_a580bb63c1418b2fc8456f9b6c5b6d39d}{KERNEL\_LOG\_ERROR}(\textcolor{stringliteral}{"Serial settings structure is NULL"}, 
431                          \hyperlink{error__types_8h_a4db9ee29f2ff83c71567c12f6bfbf28ca3d37cbe00af5e55b2ab0cfac2a5b4b0e}{ERROR\_NULL\_POINTER}, 
432                          \textcolor{keyword}{sizeof}(\hyperlink{error__types_8h_a4db9ee29f2ff83c71567c12f6bfbf28ca3d37cbe00af5e55b2ab0cfac2a5b4b0e}{ERROR\_NULL\_POINTER}), 
433                          \hyperlink{error__types_8h_a4db9ee29f2ff83c71567c12f6bfbf28ca3d37cbe00af5e55b2ab0cfac2a5b4b0e}{ERROR\_NULL\_POINTER});
434 \textcolor{preprocessor}{#endif}
435         \textcolor{keywordflow}{return} \hyperlink{error__types_8h_a4db9ee29f2ff83c71567c12f6bfbf28ca3d37cbe00af5e55b2ab0cfac2a5b4b0e}{ERROR\_NULL\_POINTER};
436     \}
437     \hyperlink{bsp__usart_8c_a8aa979774d50a01cae417a899595055c}{CHECK\_BAUDRATE}(settings->\hyperlink{struct_s_e_r_i_a_l___s_e_t_t_i_n_g_s_ac4f06ea26ed6bd7ae83b92d64ac10b78}{baudrate});
438     \hyperlink{bsp__usart_8c_a51885194f22c4bd5f94ab0bb253dd079}{CHECK\_WDLENGTH}(settings->\hyperlink{struct_s_e_r_i_a_l___s_e_t_t_i_n_g_s_ae9ff0fba282a81e6b05a1082ab54e14d}{word\_length});
439     \hyperlink{bsp__usart_8c_ace359bfb3e864f995667f829a5520105}{CHECK\_STOPBITS}(settings->\hyperlink{struct_s_e_r_i_a_l___s_e_t_t_i_n_g_s_ae847d8b7e1095e0ae8d6eb1e4a281585}{stop\_bits});
440     \hyperlink{bsp__usart_8c_a2c164787cf0d531b3c026aa2b9193a2b}{CHECK\_PARITYVA}(settings->\hyperlink{struct_s_e_r_i_a_l___s_e_t_t_i_n_g_s_a57fc780fe7a58343cb0513fd873e95fb}{partity});
441     \hyperlink{bsp__usart_8c_a47ca255399a13357557641c6af83af64}{CHECK\_CTRLFLOW}(settings->\hyperlink{struct_s_e_r_i_a_l___s_e_t_t_i_n_g_s_a6f2a9d6a71d9ca705cf561f08e4e222c}{ctrl\_flow});
442 
443     \textcolor{comment}{/* Init GPIO and USART clock */}
444     error = \hyperlink{bsp__clocks_8h_a500b2e77b70c93b3f2b4a94cc9bcf79d}{bsp\_clk\_gpio\_enable}(\hyperlink{bsp__gpio_8h_a69f521b579d2c761dd65949f2bae88f3a4cb73b98ec508807d984052a1598950a}{GPIO\_ID\_A});
445     \textcolor{keywordflow}{if}(error != \hyperlink{error__types_8h_a4db9ee29f2ff83c71567c12f6bfbf28cabf350750d0d4fabd8954c0f1e9bbae94}{NO\_ERROR})
446     \{
447         \textcolor{keywordflow}{return} error;
448     \}
449     error = \hyperlink{bsp__clocks_8h_aaf01af602e17579af5e6af009ae7a557}{bsp\_clk\_usart\_enable}(\hyperlink{bsp__usart_8h_a58f9be3820e29e0fbf00e2466c3ee768abb138542d801249fd01ec62c34f52cff}{USART\_ID\_2});
450     \textcolor{keywordflow}{if}(error != \hyperlink{error__types_8h_a4db9ee29f2ff83c71567c12f6bfbf28cabf350750d0d4fabd8954c0f1e9bbae94}{NO\_ERROR})
451     \{
452         \textcolor{keywordflow}{return} error;
453     \}
454 
455     \textcolor{comment}{/* Initialize the USART2 GPIO A */}
456     gpio\_settings.\hyperlink{struct_g_p_i_o___s_e_t_t_i_n_g_s_aad1e743ccf6e6bc276e61f9ba35bdfd0}{io\_pin}      = \hyperlink{bsp__gpio_8h_a6eee38b797a7268f04357dfa2759efd2}{GPIO\_PIN\_2} | 
457                                 \hyperlink{bsp__gpio_8h_adcaf899c018a0dde572b5af783565c62}{GPIO\_PIN\_3};
458     gpio\_settings.\hyperlink{struct_g_p_i_o___s_e_t_t_i_n_g_s_aca4ea33051d3d932467e31db14e636aa}{io\_modetype} = \hyperlink{bsp__gpio_8h_ae0c591139910f3313c998fdcf74a2b77}{GPIO\_MODE\_ALTFUN}   | 
459                                 \hyperlink{bsp__gpio_8h_af9c9aabc72e4bda42794979584908a8c}{GPIO\_TYPE\_PUSHPULL} | 
460                                 \hyperlink{bsp__gpio_8h_ad53ebddfcc3973120b1c0271423f131e}{GPIO\_PUPD\_NONE};
461     gpio\_settings.\hyperlink{struct_g_p_i_o___s_e_t_t_i_n_g_s_a4555d90ee383bdb9bf2fc3b049f32fd1}{io\_altfunc}  = \hyperlink{bsp__gpio_8h_a6af3869309b2bfedca84f57a7772ee4d}{GPIO\_ALFUNC\_7};
462     gpio\_settings.\hyperlink{struct_g_p_i_o___s_e_t_t_i_n_g_s_aee8d1e0b4f18b0a599ebcbc2e0c8b60f}{io\_speed}    = \hyperlink{bsp__gpio_8h_ae11603e44b5bb26398c583a2410cafd5}{GPIO\_SPEED\_VERY\_HIGH};
463 
464     error = \hyperlink{bsp__gpio_8h_ac05d93f29cf8cdcd3809298fe5df2f87}{bsp\_gpio\_init}(\hyperlink{bsp__gpio_8h_a69f521b579d2c761dd65949f2bae88f3a4cb73b98ec508807d984052a1598950a}{GPIO\_ID\_A}, &gpio\_settings);
465     \textcolor{keywordflow}{if}(error != \hyperlink{error__types_8h_a4db9ee29f2ff83c71567c12f6bfbf28cabf350750d0d4fabd8954c0f1e9bbae94}{NO\_ERROR})
466     \{
467         \textcolor{keywordflow}{return} error;
468     \}
469 
470     \textcolor{comment}{/* Make sure USART2 is disabled */}
471     \hyperlink{bsp__usart_8c_a81aa58ca3b3ff2a16c5666f1601dedc7}{bsp\_usart\_disable}(\hyperlink{bsp__usart_8h_a58f9be3820e29e0fbf00e2466c3ee768abb138542d801249fd01ec62c34f52cff}{USART\_ID\_2});
472 
473     \textcolor{comment}{/* Set USART2 settings */}
474     \hyperlink{bsp__usart_8c_a39d14fff7f007d639de7a6db12fd8acf}{bsp\_uart\_init}(\hyperlink{bsp__usart_8h_a58f9be3820e29e0fbf00e2466c3ee768abb138542d801249fd01ec62c34f52cff}{USART\_ID\_2}, settings);
475 
476     \textcolor{comment}{/* Enable USART2 */}
477     \hyperlink{bsp__usart_8c_ae71596fd1683989728deee59105b9b06}{bsp\_usart\_enable}(\hyperlink{bsp__usart_8h_a58f9be3820e29e0fbf00e2466c3ee768abb138542d801249fd01ec62c34f52cff}{USART\_ID\_2});
478 
479 \textcolor{preprocessor}{#if KERNEL\_LOG\_LEVEL >= INFO\_LOG\_LEVEL}
480     KERNEL\_LOG\_INFO(\textcolor{stringliteral}{"USART initialized"}, 
481                      \hyperlink{error__types_8h_a4db9ee29f2ff83c71567c12f6bfbf28cabf350750d0d4fabd8954c0f1e9bbae94}{NO\_ERROR}, 
482                      \textcolor{keyword}{sizeof}(\hyperlink{error__types_8h_a4db9ee29f2ff83c71567c12f6bfbf28cabf350750d0d4fabd8954c0f1e9bbae94}{NO\_ERROR}), 
483                      \hyperlink{error__types_8h_a4db9ee29f2ff83c71567c12f6bfbf28cabf350750d0d4fabd8954c0f1e9bbae94}{NO\_ERROR});
484 \textcolor{preprocessor}{#endif }
485     \hyperlink{bsp__usart_8c_ad317e99f056e9ce535815fcdd1697c93}{usart\_init\_state} = 1;
486     \textcolor{keywordflow}{return} \hyperlink{error__types_8h_a4db9ee29f2ff83c71567c12f6bfbf28cabf350750d0d4fabd8954c0f1e9bbae94}{NO\_ERROR};
487 \}
\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{bsp__usart_8c_ac8063a6773891c77be25ad972f915f35_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=276pt]{bsp__usart_8c_ac8063a6773891c77be25ad972f915f35_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{bsp__usart_8c_a28c404f87f73ce3d02c889d4792d6a19}\label{bsp__usart_8c_a28c404f87f73ce3d02c889d4792d6a19}} 
\index{bsp\+\_\+usart.\+c@{bsp\+\_\+usart.\+c}!serial\+\_\+write@{serial\+\_\+write}}
\index{serial\+\_\+write@{serial\+\_\+write}!bsp\+\_\+usart.\+c@{bsp\+\_\+usart.\+c}}
\subsubsection{\texorpdfstring{serial\+\_\+write()}{serial\_write()}}
{\footnotesize\ttfamily \hyperlink{error__types_8h_acf146bc98f60f47c79d782f7523e339c}{E\+R\+R\+O\+R\+\_\+\+C\+O\+D\+E\+\_\+E} serial\+\_\+write (\begin{DoxyParamCaption}\item[{const char $\ast$}]{str,  }\item[{const \hyperlink{stddef_8h_aa9d55e2f20e580b7445617d0d12fff6e}{size\+\_\+t}}]{length }\end{DoxyParamCaption})}



Writes a string of characters to the serial line. 

Writes a string of characters to the serial line. The line should have been initialized. If the serial line is not ready, this function has no effect.


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em str} & The string to send to the serial line. \\
\hline
\mbox{\tt in}  & {\em length} & The length of the string to send to the serial line.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
N\+O\+\_\+\+E\+R\+R\+OR is returned in case of success. Otherwise an error code is returned. Please refer to the list of the standard error codes. 
\end{DoxyReturn}


Definition at line 489 of file bsp\+\_\+usart.\+c.


\begin{DoxyCode}
490 \{
491     \textcolor{keywordtype}{size\_t} i;
492 
493     \textcolor{keywordflow}{if}(\hyperlink{bsp__usart_8c_ad317e99f056e9ce535815fcdd1697c93}{usart\_init\_state} == 0)
494     \{
495 \textcolor{preprocessor}{#if KERNEL\_LOG\_LEVEL == ERROR\_LOG\_LEVEL}
496         \hyperlink{logger_8h_a580bb63c1418b2fc8456f9b6c5b6d39d}{KERNEL\_LOG\_ERROR}(\textcolor{stringliteral}{"Serial needs to be initialized"}, 
497                          \hyperlink{error__types_8h_a4db9ee29f2ff83c71567c12f6bfbf28ca10cd4fcc87eb6469778e1c547cf94877}{ERROR\_NEED\_INIT}, 
498                          \textcolor{keyword}{sizeof}(\hyperlink{error__types_8h_a4db9ee29f2ff83c71567c12f6bfbf28ca10cd4fcc87eb6469778e1c547cf94877}{ERROR\_NEED\_INIT}), 
499                          \hyperlink{error__types_8h_a4db9ee29f2ff83c71567c12f6bfbf28ca10cd4fcc87eb6469778e1c547cf94877}{ERROR\_NEED\_INIT});
500 \textcolor{preprocessor}{#endif        }
501         \textcolor{keywordflow}{return} \hyperlink{error__types_8h_a4db9ee29f2ff83c71567c12f6bfbf28ca9af911a6ba1c32ce22213d689cb59f86}{ERROR\_ALREADY\_INIT};
502     \}
503 
504     \textcolor{keywordflow}{for}(i = 0; i < length; ++i)
505     \{
506         \textcolor{comment}{/* Wait for serial line to be ready to transmit */}
507         \textcolor{keywordflow}{while}((*\hyperlink{bsp__usart_8h_aa902cd686824df937532dbdb8a9c9dac}{USART2\_SR\_REGISTER} & \hyperlink{bsp__usart_8h_a65e9cddf0890113d405342f1d8b5b980}{USART\_SR\_TXE}) == 0);
508 
509         *\hyperlink{bsp__usart_8h_a8e09469004e7199b63ac9df19afd41a5}{USART2\_DR\_REGISTER} = *str++;
510     \}
511 
512     \textcolor{keywordflow}{return} \hyperlink{error__types_8h_a4db9ee29f2ff83c71567c12f6bfbf28cabf350750d0d4fabd8954c0f1e9bbae94}{NO\_ERROR};
513 \}
\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=309pt]{bsp__usart_8c_a28c404f87f73ce3d02c889d4792d6a19_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=285pt]{bsp__usart_8c_a28c404f87f73ce3d02c889d4792d6a19_icgraph}
\end{center}
\end{figure}


\subsection{Variable Documentation}
\mbox{\Hypertarget{bsp__usart_8c_ad317e99f056e9ce535815fcdd1697c93}\label{bsp__usart_8c_ad317e99f056e9ce535815fcdd1697c93}} 
\index{bsp\+\_\+usart.\+c@{bsp\+\_\+usart.\+c}!usart\+\_\+init\+\_\+state@{usart\+\_\+init\+\_\+state}}
\index{usart\+\_\+init\+\_\+state@{usart\+\_\+init\+\_\+state}!bsp\+\_\+usart.\+c@{bsp\+\_\+usart.\+c}}
\subsubsection{\texorpdfstring{usart\+\_\+init\+\_\+state}{usart\_init\_state}}
{\footnotesize\ttfamily \hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\+\_\+t} usart\+\_\+init\+\_\+state = 0}



Current usart initialization state. 



Definition at line 31 of file bsp\+\_\+usart.\+c.

