\hypertarget{bsp__gpio_8c}{}\section{Kernel/\+Sources/arch/board/stm32/f401re/src/bsp\+\_\+gpio.c File Reference}
\label{bsp__gpio_8c}\index{Kernel/\+Sources/arch/board/stm32/f401re/src/bsp\+\_\+gpio.\+c@{Kernel/\+Sources/arch/board/stm32/f401re/src/bsp\+\_\+gpio.\+c}}
{\ttfamily \#include \char`\"{}error\+\_\+types.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}bsp\+\_\+gpio.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}stdint.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}config.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}stddef.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}logger.\+h\char`\"{}}\newline
Include dependency graph for bsp\+\_\+gpio.\+c\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{bsp__gpio_8c__incl}
\end{center}
\end{figure}
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \hyperlink{bsp__gpio_8c_ae8e3e4a5297b1359f01d8a77bcc270c0}{C\+H\+E\+C\+K\+\_\+\+M\+O\+D\+E\+T\+Y\+PE}(modetype)
\begin{DoxyCompactList}\small\item\em Checks the mode and type field conformity. \end{DoxyCompactList}\item 
\#define \hyperlink{bsp__gpio_8c_aabaa6421ac1a7a8e9d453628650ab7a3}{C\+H\+E\+C\+K\+\_\+\+S\+P\+E\+ED}(speed)
\begin{DoxyCompactList}\small\item\em Checks the speed field conformity. \end{DoxyCompactList}\item 
\#define \hyperlink{bsp__gpio_8c_a5ede3d69b9f41a22b2fc0beb806967d3}{C\+H\+E\+C\+K\+\_\+\+A\+L\+T\+F\+U\+NC}(altfunc)
\begin{DoxyCompactList}\small\item\em Checks the alternate function field conformity. \end{DoxyCompactList}\item 
\#define \hyperlink{bsp__gpio_8c_a56f1639d4d0edda81bed942e0a536b3d}{G\+P\+I\+O\+\_\+\+X\+\_\+\+R\+E\+G\+I\+S\+T\+ER}(gpio,  offset)~((volatile \hyperlink{stdint_8h_a324c5d28c0d82f502a234ab99efac87a}{uint32\+\_\+t}$\ast$)(\hyperlink{bsp__gpio_8h_a72db53eb21962c0c32457008d0e0b3bf}{G\+P\+I\+O\+\_\+\+X\+\_\+\+B\+A\+S\+E\+\_\+\+A\+D\+D\+R\+E\+SS} + 0x400 $\ast$ gpio + offset))
\begin{DoxyCompactList}\small\item\em Computes the register address for a given G\+P\+IO register. \end{DoxyCompactList}\item 
\#define \hyperlink{bsp__gpio_8c_a70e4ad259c3ad36b511918978e23c9ad}{G\+P\+I\+O\+\_\+\+O\+T\+Y\+P\+E\+R\+\_\+\+M\+A\+SK}(pin)~(1 $<$$<$ pin)
\begin{DoxyCompactList}\small\item\em computed the output type field mask for a given G\+P\+IO pin. \end{DoxyCompactList}\item 
\#define \hyperlink{bsp__gpio_8c_a8a5c19e32e8c8d3951f2bcb27839eedd}{G\+P\+I\+O\+\_\+\+O\+S\+P\+E\+E\+D\+R\+\_\+\+M\+A\+SK}(pin)~(1 $<$$<$ (pin $<$$<$ 1))
\begin{DoxyCompactList}\small\item\em computed the output speed field mask for a given G\+P\+IO pin. \end{DoxyCompactList}\item 
\#define \hyperlink{bsp__gpio_8c_a0900dad3061f961852cfccc1c2113b78}{G\+P\+I\+O\+\_\+\+A\+F\+R\+\_\+\+M\+A\+SK}(pin)~(1 $<$$<$ (pin $<$$<$ 2))
\begin{DoxyCompactList}\small\item\em computed the A\+FR field mask for a given G\+P\+IO pin. \end{DoxyCompactList}\item 
\#define \hyperlink{bsp__gpio_8c_a4528590820ddd2bbefba27ed999298b4}{G\+P\+I\+O\+\_\+\+M\+O\+D\+E\+R\+\_\+\+M\+A\+SK}(pin)~(1 $<$$<$ (pin $<$$<$ 1))
\begin{DoxyCompactList}\small\item\em computed the mode field mask for a given G\+P\+IO pin. \end{DoxyCompactList}\item 
\#define \hyperlink{bsp__gpio_8c_a18ae923766f6495859f915dfb671f19a}{G\+P\+I\+O\+\_\+\+P\+U\+P\+D\+R\+\_\+\+M\+A\+SK}(pin)~(1 $<$$<$ (pin $<$$<$ 1))
\begin{DoxyCompactList}\small\item\em computed the P\+U\+PD field mask for a given G\+P\+IO pin. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{error__types_8h_acf146bc98f60f47c79d782f7523e339c}{E\+R\+R\+O\+R\+\_\+\+C\+O\+D\+E\+\_\+E} \hyperlink{bsp__gpio_8c_ac05d93f29cf8cdcd3809298fe5df2f87}{bsp\+\_\+gpio\+\_\+init} (const \hyperlink{bsp__gpio_8h_ab086506332275a2a873dfce02ed5a3b8}{G\+P\+I\+O\+\_\+\+I\+D\+E\+N\+T\+I\+F\+I\+E\+R\+\_\+E} gpio\+\_\+id, const \hyperlink{bsp__gpio_8h_ad7cd0faab6d093c8c9c399372e147467}{G\+P\+I\+O\+\_\+\+S\+E\+T\+T\+I\+N\+G\+S\+\_\+T} $\ast$settings)
\begin{DoxyCompactList}\small\item\em Initializes a given G\+P\+IO bank. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Macro Definition Documentation}
\mbox{\Hypertarget{bsp__gpio_8c_a5ede3d69b9f41a22b2fc0beb806967d3}\label{bsp__gpio_8c_a5ede3d69b9f41a22b2fc0beb806967d3}} 
\index{bsp\+\_\+gpio.\+c@{bsp\+\_\+gpio.\+c}!C\+H\+E\+C\+K\+\_\+\+A\+L\+T\+F\+U\+NC@{C\+H\+E\+C\+K\+\_\+\+A\+L\+T\+F\+U\+NC}}
\index{C\+H\+E\+C\+K\+\_\+\+A\+L\+T\+F\+U\+NC@{C\+H\+E\+C\+K\+\_\+\+A\+L\+T\+F\+U\+NC}!bsp\+\_\+gpio.\+c@{bsp\+\_\+gpio.\+c}}
\subsubsection{\texorpdfstring{C\+H\+E\+C\+K\+\_\+\+A\+L\+T\+F\+U\+NC}{CHECK\_ALTFUNC}}
{\footnotesize\ttfamily \#define C\+H\+E\+C\+K\+\_\+\+A\+L\+T\+F\+U\+NC(\begin{DoxyParamCaption}\item[{}]{altfunc }\end{DoxyParamCaption})}

{\bfseries Value\+:}
\begin{DoxyCode}
(\{                                                                           \(\backslash\)
    if(altfunc > \hyperlink{bsp__gpio_8h_ad08e321e0fe351c401c3c698bba92fd7}{GPIO\_ALFUNC\_15})                                             \(\backslash\)
    \{                                                                        \(\backslash\)
        if(\hyperlink{config_8h_a6c272d2b12ffba9bdd5a4d5dd608a0f8}{KERNEL\_LOG\_LEVEL} == \hyperlink{config_8h_a023f94f341f2300adee0891b15b364b2}{ERROR\_LOG\_LEVEL})                             
       \(\backslash\)
        \{                                                                    \(\backslash\)
            KERNEL\_LOG\_ERROR(\textcolor{stringliteral}{"Invalid GPIO alternative function"},            \(\backslash\)
                             (\textcolor{keywordtype}{void}*)(\hyperlink{stdint_8h_a324c5d28c0d82f502a234ab99efac87a}{uint32\_t})altfunc,                       \(\backslash\)
                             \textcolor{keyword}{sizeof}(altfunc),                                \(\backslash\)
                             \hyperlink{error__types_8h_a4db9ee29f2ff83c71567c12f6bfbf28cabbe6797281350f36c23d07d6f2d7f6e2}{ERROR\_INVALID\_PARAM});                           \(\backslash\)
        \}                                                                    \(\backslash\)
                                                                             \(\backslash\)
        return \hyperlink{error__types_8h_a4db9ee29f2ff83c71567c12f6bfbf28cabbe6797281350f36c23d07d6f2d7f6e2}{ERROR\_INVALID\_PARAM};                                          \(\backslash\)
    \}                                                                        \(\backslash\)
\})
\end{DoxyCode}


Checks the alternate function field conformity. 

This macro will return from the function it is used in if an error is detected. An error message will be logged and an invalid parameter error is returned.


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em altfunc} & The alternate function of the G\+P\+IO settings. \\
\hline
\end{DoxyParams}


Definition at line 119 of file bsp\+\_\+gpio.\+c.

\mbox{\Hypertarget{bsp__gpio_8c_ae8e3e4a5297b1359f01d8a77bcc270c0}\label{bsp__gpio_8c_ae8e3e4a5297b1359f01d8a77bcc270c0}} 
\index{bsp\+\_\+gpio.\+c@{bsp\+\_\+gpio.\+c}!C\+H\+E\+C\+K\+\_\+\+M\+O\+D\+E\+T\+Y\+PE@{C\+H\+E\+C\+K\+\_\+\+M\+O\+D\+E\+T\+Y\+PE}}
\index{C\+H\+E\+C\+K\+\_\+\+M\+O\+D\+E\+T\+Y\+PE@{C\+H\+E\+C\+K\+\_\+\+M\+O\+D\+E\+T\+Y\+PE}!bsp\+\_\+gpio.\+c@{bsp\+\_\+gpio.\+c}}
\subsubsection{\texorpdfstring{C\+H\+E\+C\+K\+\_\+\+M\+O\+D\+E\+T\+Y\+PE}{CHECK\_MODETYPE}}
{\footnotesize\ttfamily \#define C\+H\+E\+C\+K\+\_\+\+M\+O\+D\+E\+T\+Y\+PE(\begin{DoxyParamCaption}\item[{}]{modetype }\end{DoxyParamCaption})}



Checks the mode and type field conformity. 

This macro will return from the function it is used in if an error is detected. An error message will be logged and an invalid parameter error is returned.


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em modetype} & The mode and type of the G\+P\+IO settings. \\
\hline
\end{DoxyParams}


Definition at line 40 of file bsp\+\_\+gpio.\+c.

\mbox{\Hypertarget{bsp__gpio_8c_aabaa6421ac1a7a8e9d453628650ab7a3}\label{bsp__gpio_8c_aabaa6421ac1a7a8e9d453628650ab7a3}} 
\index{bsp\+\_\+gpio.\+c@{bsp\+\_\+gpio.\+c}!C\+H\+E\+C\+K\+\_\+\+S\+P\+E\+ED@{C\+H\+E\+C\+K\+\_\+\+S\+P\+E\+ED}}
\index{C\+H\+E\+C\+K\+\_\+\+S\+P\+E\+ED@{C\+H\+E\+C\+K\+\_\+\+S\+P\+E\+ED}!bsp\+\_\+gpio.\+c@{bsp\+\_\+gpio.\+c}}
\subsubsection{\texorpdfstring{C\+H\+E\+C\+K\+\_\+\+S\+P\+E\+ED}{CHECK\_SPEED}}
{\footnotesize\ttfamily \#define C\+H\+E\+C\+K\+\_\+\+S\+P\+E\+ED(\begin{DoxyParamCaption}\item[{}]{speed }\end{DoxyParamCaption})}

{\bfseries Value\+:}
\begin{DoxyCode}
(\{                                                                           \(\backslash\)
    if(speed > \hyperlink{bsp__gpio_8h_ae11603e44b5bb26398c583a2410cafd5}{GPIO\_SPEED\_VERY\_HIGH})                                         \(\backslash\)
    \{                                                                        \(\backslash\)
        if(\hyperlink{config_8h_a6c272d2b12ffba9bdd5a4d5dd608a0f8}{KERNEL\_LOG\_LEVEL} == \hyperlink{config_8h_a023f94f341f2300adee0891b15b364b2}{ERROR\_LOG\_LEVEL})                             
       \(\backslash\)
        \{                                                                    \(\backslash\)
            KERNEL\_LOG\_ERROR(\textcolor{stringliteral}{"Invalid GPIO speed"},                           \(\backslash\)
                             (\textcolor{keywordtype}{void}*)(\hyperlink{stdint_8h_a324c5d28c0d82f502a234ab99efac87a}{uint32\_t})speed,                         \(\backslash\)
                             \textcolor{keyword}{sizeof}(speed),                                  \(\backslash\)
                             \hyperlink{error__types_8h_a4db9ee29f2ff83c71567c12f6bfbf28cabbe6797281350f36c23d07d6f2d7f6e2}{ERROR\_INVALID\_PARAM});                           \(\backslash\)
        \}                                                                    \(\backslash\)
                                                                             \(\backslash\)
        return \hyperlink{error__types_8h_a4db9ee29f2ff83c71567c12f6bfbf28cabbe6797281350f36c23d07d6f2d7f6e2}{ERROR\_INVALID\_PARAM};                                          \(\backslash\)
    \}                                                                        \(\backslash\)
\})
\end{DoxyCode}


Checks the speed field conformity. 

This macro will return from the function it is used in if an error is detected. An error message will be logged and an invalid parameter error is returned.


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em speed} & The speed of the G\+P\+IO settings. \\
\hline
\end{DoxyParams}


Definition at line 94 of file bsp\+\_\+gpio.\+c.

\mbox{\Hypertarget{bsp__gpio_8c_a0900dad3061f961852cfccc1c2113b78}\label{bsp__gpio_8c_a0900dad3061f961852cfccc1c2113b78}} 
\index{bsp\+\_\+gpio.\+c@{bsp\+\_\+gpio.\+c}!G\+P\+I\+O\+\_\+\+A\+F\+R\+\_\+\+M\+A\+SK@{G\+P\+I\+O\+\_\+\+A\+F\+R\+\_\+\+M\+A\+SK}}
\index{G\+P\+I\+O\+\_\+\+A\+F\+R\+\_\+\+M\+A\+SK@{G\+P\+I\+O\+\_\+\+A\+F\+R\+\_\+\+M\+A\+SK}!bsp\+\_\+gpio.\+c@{bsp\+\_\+gpio.\+c}}
\subsubsection{\texorpdfstring{G\+P\+I\+O\+\_\+\+A\+F\+R\+\_\+\+M\+A\+SK}{GPIO\_AFR\_MASK}}
{\footnotesize\ttfamily \#define G\+P\+I\+O\+\_\+\+A\+F\+R\+\_\+\+M\+A\+SK(\begin{DoxyParamCaption}\item[{}]{pin }\end{DoxyParamCaption})~(1 $<$$<$ (pin $<$$<$ 2))}



computed the A\+FR field mask for a given G\+P\+IO pin. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em pin} & The pin number for wich we compute the A\+FR field mask.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The A\+FR field mask is computed. 
\end{DoxyReturn}


Definition at line 170 of file bsp\+\_\+gpio.\+c.

\mbox{\Hypertarget{bsp__gpio_8c_a4528590820ddd2bbefba27ed999298b4}\label{bsp__gpio_8c_a4528590820ddd2bbefba27ed999298b4}} 
\index{bsp\+\_\+gpio.\+c@{bsp\+\_\+gpio.\+c}!G\+P\+I\+O\+\_\+\+M\+O\+D\+E\+R\+\_\+\+M\+A\+SK@{G\+P\+I\+O\+\_\+\+M\+O\+D\+E\+R\+\_\+\+M\+A\+SK}}
\index{G\+P\+I\+O\+\_\+\+M\+O\+D\+E\+R\+\_\+\+M\+A\+SK@{G\+P\+I\+O\+\_\+\+M\+O\+D\+E\+R\+\_\+\+M\+A\+SK}!bsp\+\_\+gpio.\+c@{bsp\+\_\+gpio.\+c}}
\subsubsection{\texorpdfstring{G\+P\+I\+O\+\_\+\+M\+O\+D\+E\+R\+\_\+\+M\+A\+SK}{GPIO\_MODER\_MASK}}
{\footnotesize\ttfamily \#define G\+P\+I\+O\+\_\+\+M\+O\+D\+E\+R\+\_\+\+M\+A\+SK(\begin{DoxyParamCaption}\item[{}]{pin }\end{DoxyParamCaption})~(1 $<$$<$ (pin $<$$<$ 1))}



computed the mode field mask for a given G\+P\+IO pin. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em pin} & The pin number for wich we compute the mode field mask.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The mode field mask is computed. 
\end{DoxyReturn}


Definition at line 178 of file bsp\+\_\+gpio.\+c.

\mbox{\Hypertarget{bsp__gpio_8c_a8a5c19e32e8c8d3951f2bcb27839eedd}\label{bsp__gpio_8c_a8a5c19e32e8c8d3951f2bcb27839eedd}} 
\index{bsp\+\_\+gpio.\+c@{bsp\+\_\+gpio.\+c}!G\+P\+I\+O\+\_\+\+O\+S\+P\+E\+E\+D\+R\+\_\+\+M\+A\+SK@{G\+P\+I\+O\+\_\+\+O\+S\+P\+E\+E\+D\+R\+\_\+\+M\+A\+SK}}
\index{G\+P\+I\+O\+\_\+\+O\+S\+P\+E\+E\+D\+R\+\_\+\+M\+A\+SK@{G\+P\+I\+O\+\_\+\+O\+S\+P\+E\+E\+D\+R\+\_\+\+M\+A\+SK}!bsp\+\_\+gpio.\+c@{bsp\+\_\+gpio.\+c}}
\subsubsection{\texorpdfstring{G\+P\+I\+O\+\_\+\+O\+S\+P\+E\+E\+D\+R\+\_\+\+M\+A\+SK}{GPIO\_OSPEEDR\_MASK}}
{\footnotesize\ttfamily \#define G\+P\+I\+O\+\_\+\+O\+S\+P\+E\+E\+D\+R\+\_\+\+M\+A\+SK(\begin{DoxyParamCaption}\item[{}]{pin }\end{DoxyParamCaption})~(1 $<$$<$ (pin $<$$<$ 1))}



computed the output speed field mask for a given G\+P\+IO pin. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em pin} & The pin number for wich we compute the output speed field mask.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The output speed field mask is computed. 
\end{DoxyReturn}


Definition at line 162 of file bsp\+\_\+gpio.\+c.

\mbox{\Hypertarget{bsp__gpio_8c_a70e4ad259c3ad36b511918978e23c9ad}\label{bsp__gpio_8c_a70e4ad259c3ad36b511918978e23c9ad}} 
\index{bsp\+\_\+gpio.\+c@{bsp\+\_\+gpio.\+c}!G\+P\+I\+O\+\_\+\+O\+T\+Y\+P\+E\+R\+\_\+\+M\+A\+SK@{G\+P\+I\+O\+\_\+\+O\+T\+Y\+P\+E\+R\+\_\+\+M\+A\+SK}}
\index{G\+P\+I\+O\+\_\+\+O\+T\+Y\+P\+E\+R\+\_\+\+M\+A\+SK@{G\+P\+I\+O\+\_\+\+O\+T\+Y\+P\+E\+R\+\_\+\+M\+A\+SK}!bsp\+\_\+gpio.\+c@{bsp\+\_\+gpio.\+c}}
\subsubsection{\texorpdfstring{G\+P\+I\+O\+\_\+\+O\+T\+Y\+P\+E\+R\+\_\+\+M\+A\+SK}{GPIO\_OTYPER\_MASK}}
{\footnotesize\ttfamily \#define G\+P\+I\+O\+\_\+\+O\+T\+Y\+P\+E\+R\+\_\+\+M\+A\+SK(\begin{DoxyParamCaption}\item[{}]{pin }\end{DoxyParamCaption})~(1 $<$$<$ pin)}



computed the output type field mask for a given G\+P\+IO pin. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em pin} & The pin number for wich we compute the output type field mask.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The output type field mask is computed. 
\end{DoxyReturn}


Definition at line 153 of file bsp\+\_\+gpio.\+c.

\mbox{\Hypertarget{bsp__gpio_8c_a18ae923766f6495859f915dfb671f19a}\label{bsp__gpio_8c_a18ae923766f6495859f915dfb671f19a}} 
\index{bsp\+\_\+gpio.\+c@{bsp\+\_\+gpio.\+c}!G\+P\+I\+O\+\_\+\+P\+U\+P\+D\+R\+\_\+\+M\+A\+SK@{G\+P\+I\+O\+\_\+\+P\+U\+P\+D\+R\+\_\+\+M\+A\+SK}}
\index{G\+P\+I\+O\+\_\+\+P\+U\+P\+D\+R\+\_\+\+M\+A\+SK@{G\+P\+I\+O\+\_\+\+P\+U\+P\+D\+R\+\_\+\+M\+A\+SK}!bsp\+\_\+gpio.\+c@{bsp\+\_\+gpio.\+c}}
\subsubsection{\texorpdfstring{G\+P\+I\+O\+\_\+\+P\+U\+P\+D\+R\+\_\+\+M\+A\+SK}{GPIO\_PUPDR\_MASK}}
{\footnotesize\ttfamily \#define G\+P\+I\+O\+\_\+\+P\+U\+P\+D\+R\+\_\+\+M\+A\+SK(\begin{DoxyParamCaption}\item[{}]{pin }\end{DoxyParamCaption})~(1 $<$$<$ (pin $<$$<$ 1))}



computed the P\+U\+PD field mask for a given G\+P\+IO pin. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em pin} & The pin number for wich we compute the P\+U\+PD field mask.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The P\+U\+PD field mask is computed. 
\end{DoxyReturn}


Definition at line 186 of file bsp\+\_\+gpio.\+c.

\mbox{\Hypertarget{bsp__gpio_8c_a56f1639d4d0edda81bed942e0a536b3d}\label{bsp__gpio_8c_a56f1639d4d0edda81bed942e0a536b3d}} 
\index{bsp\+\_\+gpio.\+c@{bsp\+\_\+gpio.\+c}!G\+P\+I\+O\+\_\+\+X\+\_\+\+R\+E\+G\+I\+S\+T\+ER@{G\+P\+I\+O\+\_\+\+X\+\_\+\+R\+E\+G\+I\+S\+T\+ER}}
\index{G\+P\+I\+O\+\_\+\+X\+\_\+\+R\+E\+G\+I\+S\+T\+ER@{G\+P\+I\+O\+\_\+\+X\+\_\+\+R\+E\+G\+I\+S\+T\+ER}!bsp\+\_\+gpio.\+c@{bsp\+\_\+gpio.\+c}}
\subsubsection{\texorpdfstring{G\+P\+I\+O\+\_\+\+X\+\_\+\+R\+E\+G\+I\+S\+T\+ER}{GPIO\_X\_REGISTER}}
{\footnotesize\ttfamily \#define G\+P\+I\+O\+\_\+\+X\+\_\+\+R\+E\+G\+I\+S\+T\+ER(\begin{DoxyParamCaption}\item[{}]{gpio,  }\item[{}]{offset }\end{DoxyParamCaption})~((volatile \hyperlink{stdint_8h_a324c5d28c0d82f502a234ab99efac87a}{uint32\+\_\+t}$\ast$)(\hyperlink{bsp__gpio_8h_a72db53eb21962c0c32457008d0e0b3bf}{G\+P\+I\+O\+\_\+\+X\+\_\+\+B\+A\+S\+E\+\_\+\+A\+D\+D\+R\+E\+SS} + 0x400 $\ast$ gpio + offset))}



Computes the register address for a given G\+P\+IO register. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em gpio} & The identifier of the G\+P\+IO for wich we request the address. \\
\hline
\mbox{\tt in}  & {\em offset} & The G\+P\+IO register address offset.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The register absolute address is computed. 
\end{DoxyReturn}


Definition at line 143 of file bsp\+\_\+gpio.\+c.



\subsection{Function Documentation}
\mbox{\Hypertarget{bsp__gpio_8c_ac05d93f29cf8cdcd3809298fe5df2f87}\label{bsp__gpio_8c_ac05d93f29cf8cdcd3809298fe5df2f87}} 
\index{bsp\+\_\+gpio.\+c@{bsp\+\_\+gpio.\+c}!bsp\+\_\+gpio\+\_\+init@{bsp\+\_\+gpio\+\_\+init}}
\index{bsp\+\_\+gpio\+\_\+init@{bsp\+\_\+gpio\+\_\+init}!bsp\+\_\+gpio.\+c@{bsp\+\_\+gpio.\+c}}
\subsubsection{\texorpdfstring{bsp\+\_\+gpio\+\_\+init()}{bsp\_gpio\_init()}}
{\footnotesize\ttfamily \hyperlink{error__types_8h_acf146bc98f60f47c79d782f7523e339c}{E\+R\+R\+O\+R\+\_\+\+C\+O\+D\+E\+\_\+E} bsp\+\_\+gpio\+\_\+init (\begin{DoxyParamCaption}\item[{const \hyperlink{bsp__gpio_8h_ab086506332275a2a873dfce02ed5a3b8}{G\+P\+I\+O\+\_\+\+I\+D\+E\+N\+T\+I\+F\+I\+E\+R\+\_\+E}}]{gpio\+\_\+id,  }\item[{const \hyperlink{bsp__gpio_8h_ad7cd0faab6d093c8c9c399372e147467}{G\+P\+I\+O\+\_\+\+S\+E\+T\+T\+I\+N\+G\+S\+\_\+T} $\ast$}]{settings }\end{DoxyParamCaption})}



Initializes a given G\+P\+IO bank. 

Initializes a given G\+P\+IO bank based on the G\+P\+IO identifier and the G\+P\+IO settings given as parameters.


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em gpio\+\_\+id} & The identifier of the G\+P\+IO to configure. \\
\hline
\mbox{\tt in}  & {\em settings} & The settings structure containing the parameters to apply to the G\+P\+IO.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
N\+O\+\_\+\+E\+R\+R\+OR is returned in case of success. Otherwise an error code is returned. Please refer to the list of the standard error codes. 
\end{DoxyReturn}


Definition at line 192 of file bsp\+\_\+gpio.\+c.


\begin{DoxyCode}
194 \{
195     \textcolor{keyword}{volatile} \hyperlink{stdint_8h_a324c5d28c0d82f502a234ab99efac87a}{uint32\_t}* current\_reg;
196 
197     \hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\_t}  i;
198 
199     \textcolor{comment}{/* Check parameters */}
200     \textcolor{keywordflow}{if}(settings == \hyperlink{stddef_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL})
201     \{
202 \textcolor{preprocessor}{#if KERNEL\_LOG\_LEVEL == ERROR\_LOG\_LEVEL}
203         \hyperlink{logger_8h_a580bb63c1418b2fc8456f9b6c5b6d39d}{KERNEL\_LOG\_ERROR}(\textcolor{stringliteral}{"GPIO settings structure is NULL"}, 
204                          \hyperlink{error__types_8h_a4db9ee29f2ff83c71567c12f6bfbf28ca3d37cbe00af5e55b2ab0cfac2a5b4b0e}{ERROR\_NULL\_POINTER}, 
205                          \textcolor{keyword}{sizeof}(\hyperlink{error__types_8h_a4db9ee29f2ff83c71567c12f6bfbf28ca3d37cbe00af5e55b2ab0cfac2a5b4b0e}{ERROR\_NULL\_POINTER}), 
206                          \hyperlink{error__types_8h_a4db9ee29f2ff83c71567c12f6bfbf28ca3d37cbe00af5e55b2ab0cfac2a5b4b0e}{ERROR\_NULL\_POINTER});
207 \textcolor{preprocessor}{#endif}
208         \textcolor{keywordflow}{return} \hyperlink{error__types_8h_a4db9ee29f2ff83c71567c12f6bfbf28ca3d37cbe00af5e55b2ab0cfac2a5b4b0e}{ERROR\_NULL\_POINTER};
209     \}
210     \hyperlink{bsp__gpio_8c_ae8e3e4a5297b1359f01d8a77bcc270c0}{CHECK\_MODETYPE}(settings->\hyperlink{struct_g_p_i_o___s_e_t_t_i_n_g_s_aca4ea33051d3d932467e31db14e636aa}{io\_modetype});
211     \hyperlink{bsp__gpio_8c_aabaa6421ac1a7a8e9d453628650ab7a3}{CHECK\_SPEED}(settings->\hyperlink{struct_g_p_i_o___s_e_t_t_i_n_g_s_aee8d1e0b4f18b0a599ebcbc2e0c8b60f}{io\_speed});
212     \hyperlink{bsp__gpio_8c_a5ede3d69b9f41a22b2fc0beb806967d3}{CHECK\_ALTFUNC}(settings->\hyperlink{struct_g_p_i_o___s_e_t_t_i_n_g_s_a4555d90ee383bdb9bf2fc3b049f32fd1}{io\_altfunc});
213     
214     \textcolor{comment}{/* Check which pin is to be configured */}
215     \textcolor{keywordflow}{for}(i = 0; i < \hyperlink{bsp__gpio_8h_a226e7ff497e286c3391041c1dc2f2bc2}{GPIO\_PIN\_COUNT}; ++i)
216     \{
217         \textcolor{comment}{/* The pin is set to be configured */}
218         \textcolor{keywordflow}{if}(((1 << i) & settings->\hyperlink{struct_g_p_i_o___s_e_t_t_i_n_g_s_aad1e743ccf6e6bc276e61f9ba35bdfd0}{io\_pin}) != 0)
219         \{
220             \textcolor{keywordflow}{if}((settings->\hyperlink{struct_g_p_i_o___s_e_t_t_i_n_g_s_aca4ea33051d3d932467e31db14e636aa}{io\_modetype} & \hyperlink{bsp__gpio_8h_a60078f74d184e10418a0e1d074d6dd43}{GPIO\_MODE\_MASK}) == 
      \hyperlink{bsp__gpio_8h_aca6eb0cd4dbe7402497829badacfa6df}{GPIO\_MODE\_OUTPUT} ||
221                (settings->\hyperlink{struct_g_p_i_o___s_e_t_t_i_n_g_s_aca4ea33051d3d932467e31db14e636aa}{io\_modetype} & \hyperlink{bsp__gpio_8h_a60078f74d184e10418a0e1d074d6dd43}{GPIO\_MODE\_MASK}) == 
      \hyperlink{bsp__gpio_8h_ae0c591139910f3313c998fdcf74a2b77}{GPIO\_MODE\_ALTFUN})
222             \{
223                 \textcolor{comment}{/* Set IO output type */}
224                 current\_reg = \hyperlink{bsp__gpio_8c_a56f1639d4d0edda81bed942e0a536b3d}{GPIO\_X\_REGISTER}(gpio\_id, 
      \hyperlink{bsp__gpio_8h_a424a9ba00d1b8767830a4ba2876b81b7}{GPIO\_OTYPER\_OFFSET});    
225                 *current\_reg = (*current\_reg & ~\hyperlink{bsp__gpio_8c_a70e4ad259c3ad36b511918978e23c9ad}{GPIO\_OTYPER\_MASK}(i)) |
226                                 (((settings->\hyperlink{struct_g_p_i_o___s_e_t_t_i_n_g_s_aca4ea33051d3d932467e31db14e636aa}{io\_modetype} & 
      \hyperlink{bsp__gpio_8h_a60078f74d184e10418a0e1d074d6dd43}{GPIO\_MODE\_MASK})
227                                     >> \hyperlink{bsp__gpio_8h_aa2a5bbbcb74757aecf837db663892f63}{GPIO\_MODE\_OFFSET})
228                                     << i);
229                 \textcolor{comment}{/* Set IO output speed */}
230                 current\_reg = \hyperlink{bsp__gpio_8c_a56f1639d4d0edda81bed942e0a536b3d}{GPIO\_X\_REGISTER}(gpio\_id, 
      \hyperlink{bsp__gpio_8h_ab361ffd58b67dc9ba2bc1d3818fd099a}{GPIO\_OSPEEDR\_OFFSET});
231                 *current\_reg = (*current\_reg & ~\hyperlink{bsp__gpio_8c_a8a5c19e32e8c8d3951f2bcb27839eedd}{GPIO\_OSPEEDR\_MASK}(i)) |
232                                 (settings->\hyperlink{struct_g_p_i_o___s_e_t_t_i_n_g_s_aee8d1e0b4f18b0a599ebcbc2e0c8b60f}{io\_speed} << (i * 2));
233             \}
234 
235             \textcolor{keywordflow}{if}((settings->\hyperlink{struct_g_p_i_o___s_e_t_t_i_n_g_s_aca4ea33051d3d932467e31db14e636aa}{io\_modetype} & \hyperlink{bsp__gpio_8h_a60078f74d184e10418a0e1d074d6dd43}{GPIO\_MODE\_MASK}) == 
      \hyperlink{bsp__gpio_8h_ae0c591139910f3313c998fdcf74a2b77}{GPIO\_MODE\_ALTFUN})
236             \{
237                 \textcolor{comment}{/* Set the alternate function */}
238                 \textcolor{keywordflow}{if}(i > 7)
239                 \{
240                     current\_reg = \hyperlink{bsp__gpio_8c_a56f1639d4d0edda81bed942e0a536b3d}{GPIO\_X\_REGISTER}(gpio\_id, 
      \hyperlink{bsp__gpio_8h_afdfc1903c8131e8c47c81bc89401f12e}{GPIO\_AFRH\_OFFSET});
241                 \}
242                 \textcolor{keywordflow}{else}
243                 \{
244                     current\_reg = \hyperlink{bsp__gpio_8c_a56f1639d4d0edda81bed942e0a536b3d}{GPIO\_X\_REGISTER}(gpio\_id, 
      \hyperlink{bsp__gpio_8h_a2a111ee9e5845dcba61cf1d7fe0eb43f}{GPIO\_AFRL\_OFFSET});
245                 \}
246 
247                 *current\_reg = (*current\_reg & ~\hyperlink{bsp__gpio_8c_a0900dad3061f961852cfccc1c2113b78}{GPIO\_AFR\_MASK}(i)) |
248                                 (settings->\hyperlink{struct_g_p_i_o___s_e_t_t_i_n_g_s_a4555d90ee383bdb9bf2fc3b049f32fd1}{io\_altfunc} << ((i & 0x7) * 4));            
249             \}
250 
251             \textcolor{comment}{/* Set the GPIO mode */}
252             current\_reg = \hyperlink{bsp__gpio_8c_a56f1639d4d0edda81bed942e0a536b3d}{GPIO\_X\_REGISTER}(gpio\_id, 
      \hyperlink{bsp__gpio_8h_abd2bf74240b288f8d42e6e6aa157ba52}{GPIO\_MODER\_OFFSET});
253             *current\_reg = (*current\_reg & ~\hyperlink{bsp__gpio_8c_a4528590820ddd2bbefba27ed999298b4}{GPIO\_MODER\_MASK}(i)) |
254                             (settings->\hyperlink{struct_g_p_i_o___s_e_t_t_i_n_g_s_aca4ea33051d3d932467e31db14e636aa}{io\_modetype} << (i * 2));
255 
256             \textcolor{comment}{/* Set the PU/PD behavior */}
257             current\_reg = \hyperlink{bsp__gpio_8c_a56f1639d4d0edda81bed942e0a536b3d}{GPIO\_X\_REGISTER}(gpio\_id, 
      \hyperlink{bsp__gpio_8h_a4f90e03c8f7a5a858796d314a766c36e}{GPIO\_PUDR\_OFFSET});
258             *current\_reg = (*current\_reg & ~\hyperlink{bsp__gpio_8c_a18ae923766f6495859f915dfb671f19a}{GPIO\_PUPDR\_MASK}(i)) |
259                             (((settings->\hyperlink{struct_g_p_i_o___s_e_t_t_i_n_g_s_aca4ea33051d3d932467e31db14e636aa}{io\_modetype} & \hyperlink{bsp__gpio_8h_a8ca9d068fb34ae1e9095f0f7a69e6819}{GPIO\_PUPD\_MASK}) >> 
260                             \hyperlink{bsp__gpio_8h_a738b243ba6580613802758433b10a639}{GPIO\_PUPD\_OFFSET})
261                             << i * 2);
262         \}
263     \}
264 
265 \textcolor{preprocessor}{#if KERNEL\_LOG\_LEVEL >= INFO\_LOG\_LEVEL}
266     KERNEL\_LOG\_INFO(\textcolor{stringliteral}{"GPIO initialized"}, 
267                     (\textcolor{keywordtype}{void}*)(\hyperlink{stdint_8h_a324c5d28c0d82f502a234ab99efac87a}{uint32\_t})gpio\_id, 
268                     \textcolor{keyword}{sizeof}(gpio\_id), 
269                     \hyperlink{error__types_8h_a4db9ee29f2ff83c71567c12f6bfbf28cabf350750d0d4fabd8954c0f1e9bbae94}{NO\_ERROR});
270 \textcolor{preprocessor}{#endif}
271 
272     \textcolor{keywordflow}{return} \hyperlink{error__types_8h_a4db9ee29f2ff83c71567c12f6bfbf28cabf350750d0d4fabd8954c0f1e9bbae94}{NO\_ERROR};
273 \}
\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=316pt]{bsp__gpio_8c_ac05d93f29cf8cdcd3809298fe5df2f87_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{bsp__gpio_8c_ac05d93f29cf8cdcd3809298fe5df2f87_icgraph}
\end{center}
\end{figure}
