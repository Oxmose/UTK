\hypertarget{bsp__flash_8c}{}\section{Kernel/\+Sources/arch/board/stm32/f401re/src/bsp\+\_\+flash.c File Reference}
\label{bsp__flash_8c}\index{Kernel/\+Sources/arch/board/stm32/f401re/src/bsp\+\_\+flash.\+c@{Kernel/\+Sources/arch/board/stm32/f401re/src/bsp\+\_\+flash.\+c}}
{\ttfamily \#include \char`\"{}error\+\_\+types.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}bsp\+\_\+flash.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}cpu\+\_\+api.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}stdint.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}config.\+h\char`\"{}}\newline
Include dependency graph for bsp\+\_\+flash.\+c\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=349pt]{bsp__flash_8c__incl}
\end{center}
\end{figure}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{bsp__flash_8c_a28b133b49a8b54580ef07cc2b02b6a2d}{bsp\+\_\+flash\+\_\+cache\+\_\+enable} (void)
\begin{DoxyCompactList}\small\item\em Enables flash instruction and data cache. \end{DoxyCompactList}\item 
void \hyperlink{bsp__flash_8c_a2f8e8bffdc14c9ea45296defed4606a6}{bsp\+\_\+flash\+\_\+prefetch\+\_\+enable} (void)
\begin{DoxyCompactList}\small\item\em Enables flash prefetech unit. \end{DoxyCompactList}\item 
\hyperlink{error__types_8h_acf146bc98f60f47c79d782f7523e339c}{E\+R\+R\+O\+R\+\_\+\+C\+O\+D\+E\+\_\+E} \hyperlink{bsp__flash_8c_a51f3c79743adab8e26ca7a5c6b33c55b}{bsp\+\_\+flash\+\_\+set\+\_\+latency} (const \hyperlink{bsp__flash_8h_ab4bdf422e30b864e1ff48788fbde702d}{F\+L\+A\+S\+H\+\_\+\+L\+A\+T\+E\+N\+C\+Y\+\_\+\+W\+S\+\_\+E} latency)
\begin{DoxyCompactList}\small\item\em Sets the flash latency. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Function Documentation}
\mbox{\Hypertarget{bsp__flash_8c_a28b133b49a8b54580ef07cc2b02b6a2d}\label{bsp__flash_8c_a28b133b49a8b54580ef07cc2b02b6a2d}} 
\index{bsp\+\_\+flash.\+c@{bsp\+\_\+flash.\+c}!bsp\+\_\+flash\+\_\+cache\+\_\+enable@{bsp\+\_\+flash\+\_\+cache\+\_\+enable}}
\index{bsp\+\_\+flash\+\_\+cache\+\_\+enable@{bsp\+\_\+flash\+\_\+cache\+\_\+enable}!bsp\+\_\+flash.\+c@{bsp\+\_\+flash.\+c}}
\subsubsection{\texorpdfstring{bsp\+\_\+flash\+\_\+cache\+\_\+enable()}{bsp\_flash\_cache\_enable()}}
{\footnotesize\ttfamily void bsp\+\_\+flash\+\_\+cache\+\_\+enable (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Enables flash instruction and data cache. 

­ $\ast$

Enables flash instruction and data cache. 

Definition at line 34 of file bsp\+\_\+flash.\+c.


\begin{DoxyCode}
35 \{
36     *\hyperlink{bsp__flash_8h_a177b682ed269b91b61bf46005fca9620}{FLASH\_ACR\_REGISTER} = *\hyperlink{bsp__flash_8h_a177b682ed269b91b61bf46005fca9620}{FLASH\_ACR\_REGISTER}  | 
37                            \hyperlink{bsp__flash_8h_a8723e738daa1eb5acfd3d66130060541}{FLASH\_ACR\_ICACHE\_EN} | 
38                            \hyperlink{bsp__flash_8h_a941d0c7a25f08c35724c4a572d90a6cc}{FLASH\_ACR\_DCACHE\_EN};
39     \hyperlink{cpu__api_8h_a386c6bcf8612ed54728c6157bb83036e}{cpu\_mem\_barrier}();
40 \}
\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{bsp__flash_8c_a28b133b49a8b54580ef07cc2b02b6a2d_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{bsp__flash_8c_a2f8e8bffdc14c9ea45296defed4606a6}\label{bsp__flash_8c_a2f8e8bffdc14c9ea45296defed4606a6}} 
\index{bsp\+\_\+flash.\+c@{bsp\+\_\+flash.\+c}!bsp\+\_\+flash\+\_\+prefetch\+\_\+enable@{bsp\+\_\+flash\+\_\+prefetch\+\_\+enable}}
\index{bsp\+\_\+flash\+\_\+prefetch\+\_\+enable@{bsp\+\_\+flash\+\_\+prefetch\+\_\+enable}!bsp\+\_\+flash.\+c@{bsp\+\_\+flash.\+c}}
\subsubsection{\texorpdfstring{bsp\+\_\+flash\+\_\+prefetch\+\_\+enable()}{bsp\_flash\_prefetch\_enable()}}
{\footnotesize\ttfamily void bsp\+\_\+flash\+\_\+prefetch\+\_\+enable (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Enables flash prefetech unit. 

­ $\ast$

Enables flash prefetech unit. 

Definition at line 42 of file bsp\+\_\+flash.\+c.


\begin{DoxyCode}
43 \{
44     *\hyperlink{bsp__flash_8h_a177b682ed269b91b61bf46005fca9620}{FLASH\_ACR\_REGISTER} = *\hyperlink{bsp__flash_8h_a177b682ed269b91b61bf46005fca9620}{FLASH\_ACR\_REGISTER}  |  
      \hyperlink{bsp__flash_8h_a479a3f068bb372bdf3bfc5b37846378a}{FLASH\_ACR\_PREFETCH\_EN};
45     \hyperlink{cpu__api_8h_a386c6bcf8612ed54728c6157bb83036e}{cpu\_mem\_barrier}();
46 \}
\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=326pt]{bsp__flash_8c_a2f8e8bffdc14c9ea45296defed4606a6_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{bsp__flash_8c_a51f3c79743adab8e26ca7a5c6b33c55b}\label{bsp__flash_8c_a51f3c79743adab8e26ca7a5c6b33c55b}} 
\index{bsp\+\_\+flash.\+c@{bsp\+\_\+flash.\+c}!bsp\+\_\+flash\+\_\+set\+\_\+latency@{bsp\+\_\+flash\+\_\+set\+\_\+latency}}
\index{bsp\+\_\+flash\+\_\+set\+\_\+latency@{bsp\+\_\+flash\+\_\+set\+\_\+latency}!bsp\+\_\+flash.\+c@{bsp\+\_\+flash.\+c}}
\subsubsection{\texorpdfstring{bsp\+\_\+flash\+\_\+set\+\_\+latency()}{bsp\_flash\_set\_latency()}}
{\footnotesize\ttfamily \hyperlink{error__types_8h_acf146bc98f60f47c79d782f7523e339c}{E\+R\+R\+O\+R\+\_\+\+C\+O\+D\+E\+\_\+E} bsp\+\_\+flash\+\_\+set\+\_\+latency (\begin{DoxyParamCaption}\item[{const \hyperlink{bsp__flash_8h_ab4bdf422e30b864e1ff48788fbde702d}{F\+L\+A\+S\+H\+\_\+\+L\+A\+T\+E\+N\+C\+Y\+\_\+\+W\+S\+\_\+E}}]{latency }\end{DoxyParamCaption})}



Sets the flash latency. 

­ $\ast$

Sets the flash latency based on the latency given as parameter.


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em latency} & The latency to set.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
N\+O\+\_\+\+E\+R\+R\+OR is returned in case of success. Otherwise an error code is returned. Please refer to the list of the standard error codes. 
\end{DoxyReturn}


Definition at line 48 of file bsp\+\_\+flash.\+c.


\begin{DoxyCode}
49 \{
50     \textcolor{comment}{/* Sets the flash latency value, we don't apply mask verification because }
51 \textcolor{comment}{     * the FLASH\_LATENCY\_WS\_E enumeration should already contain the right }
52 \textcolor{comment}{     * values.}
53 \textcolor{comment}{     */}
54     *\hyperlink{bsp__flash_8h_a177b682ed269b91b61bf46005fca9620}{FLASH\_ACR\_REGISTER} = (*\hyperlink{bsp__flash_8h_a177b682ed269b91b61bf46005fca9620}{FLASH\_ACR\_REGISTER} & ~
      \hyperlink{bsp__flash_8h_a325fd0108f2a85889c495a9f08409216}{FLASH\_ACR\_LATENCY\_MASK}) | 
55                           latency;
56 
57     \textcolor{comment}{/* Delay to ensure bit update */}
58     \textcolor{keywordflow}{while}((*\hyperlink{bsp__flash_8h_a177b682ed269b91b61bf46005fca9620}{FLASH\_ACR\_REGISTER} & \hyperlink{bsp__flash_8h_a325fd0108f2a85889c495a9f08409216}{FLASH\_ACR\_LATENCY\_MASK}) != latency
      );
59 
60 \textcolor{preprocessor}{#if KERNEL\_LOG\_LEVEL >= INFO\_LOG\_LEVEL}
61     KERNEL\_LOG\_INFO(\textcolor{stringliteral}{"Flash lantency changed"}, 
62                     latency, 
63                     \textcolor{keyword}{sizeof}(latency), 
64                     \hyperlink{error__types_8h_a4db9ee29f2ff83c71567c12f6bfbf28cabf350750d0d4fabd8954c0f1e9bbae94}{NO\_ERROR});
65 \textcolor{preprocessor}{#endif}
66 
67     \textcolor{keywordflow}{return} \hyperlink{error__types_8h_a4db9ee29f2ff83c71567c12f6bfbf28cabf350750d0d4fabd8954c0f1e9bbae94}{NO\_ERROR};
68 \}
\end{DoxyCode}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=336pt]{bsp__flash_8c_a51f3c79743adab8e26ca7a5c6b33c55b_icgraph}
\end{center}
\end{figure}
